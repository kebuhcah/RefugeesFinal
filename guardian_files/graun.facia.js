webpackJsonp([6],{410:function(t,e,n){var o,i;o=[n(63),n(6),n(4),n(127)],i=function(t,e,n,o){function i(i){return i&&"number"==typeof i.length?n.unindexedChars&&t(i)?i.split(""):e(i):o(i)}return i}.apply(e,o),!(void 0!==i&&(t.exports=i))},412:function(t,e,n){var o,i;o=[n(62),n(32),n(16),n(4)],i=function(t,e,n,o){function i(i){var u=!0;if(!i)return u;var d=l.call(i),f=i.length;return d==r||d==c||(o.argsClass?d==a:e(i))||d==s&&"number"==typeof f&&n(i.splice)?!f:(t(i,function(){return u=!1}),u)}var a="[object Arguments]",r="[object Array]",s="[object Object]",c="[object String]",u=Object.prototype,l=u.toString;return i}.apply(e,o),!(void 0!==i&&(t.exports=i))},422:function(t,e,n){var o,i;o=[n(15),n(7),n(18),n(224),n(41)],i=function(t,e,n,o,i){function a(t,n){var o={conditionFn:t,loadFn:n};c.push(o),1===c.length&&e.on("window:throttledScroll",l),s()}function r(e,o,i){n.read(function(){var n=t(e),r=function(){var t=n.offset(),e=t.top-o,i=t.top+t.height+o;return u.top>e&&u.bottom<i};a(r,i)})}var s,c=[],u={top:0,bottom:0},l=function(){u.top=window.pageYOffset,u.bottom=u.top+t.viewport().height,c=o(c,function(t){return!t.conditionFn()||void t.loadFn()}),0===c.length&&e.off("window:throttledScroll",l)};return s=i(l,2e3),{add:r}}.apply(e,o),!(void 0!==i&&(t.exports=i))},423:function(t,e,n){var o,i;o=[n(133)],i=function(t){function e(e){for(var n in e)e.hasOwnProperty(n)&&t.set(i+"."+n,e[n])}function n(e){var n=t.get(i+"."+e);return n!==!1}function o(t){return n(t)===!0}var i="accessibility",a={KEY_PREFIX:i,saveState:e,isOn:o};return a}.apply(e,o),!(void 0!==i&&(t.exports=i))},480:function(t,e,n){var o,i;o=[n(18),n(423),n(27)],i=function(t,e,n){function o(o){e.isOn("flashing-elements")?o&&o():t.write(function(){n("body").addClass("disable-flashing-elements"),o&&o()})}return{shouldHideFlashingElements:o}}.apply(e,o),!(void 0!==i&&(t.exports=i))},565:function(t,e,n){var o,i;o=[n(11),n(6)],i=function(t,e){function n(n,a,r){var s=0,c=n?n.length:0;if("number"!=typeof a&&null!=a){var u=c;for(a=t(a,r,3);u--&&a(n[u],u,n);)s++}else s=null==a||r?1:a||s;return e(n,0,i(o(0,c-s),c))}var o=Math.max,i=Math.min;return n}.apply(e,o),!(void 0!==i&&(t.exports=i))},572:function(t,e,n){var o,i;o=[n(85),n(6)],i=function(t,e){function n(n){return t(n,16,e(arguments,1))}return n}.apply(e,o),!(void 0!==i&&(t.exports=i))},579:function(t,e,n){var o,i;o=[n(25),n(144)],i=function(t,e){function n(n,o,i,a){return e(n,o,"function"==typeof i&&t(i,a,2))}return n}.apply(e,o),!(void 0!==i&&(t.exports=i))},581:function(t,e,n){var o,i;o=[],i=function(){function t(t){return"undefined"==typeof t}return t}.apply(e,o),!(void 0!==i&&(t.exports=i))},599:function(t,e){t.exports='<div class="stocks__stock-value <%=deltaClass%>">\n    <div class="stocks__divider"></div>\n    <div class="stocks__name"><%=name%><%=closedInline%></div>\n    <div class="stocks__value">\n        <div class="stocks__price"><%=price%></div>\n        <%=marketDownIcon%>\n        <%=marketUpIcon%>\n        <%=marketSameIcon%>\n        <div class="stocks__change"><%=change%></div>\n    </div>\n    <%=closed%>\n</div>\n'},600:function(t,e){t.exports='<div class="stocks__stocks-container">\n    <%=stocks%>\n</div>\n'},627:function(t,e){t.exports='<button class="fc-container__toggle" data-link-name="<%=dataLink%>">\n    <%=icon%>\n    <span class="fc-container__toggle__text"><%=text%></span>\n</button>\n'},628:function(t,e){t.exports='<a href="<%=href%>" class="fc-item__liveblog-block" data-link-name="block | <%=index%>" aria-hidden="<%=ariaHidden%>">\n    <div class="fc-item__liveblog-block__text">\n        <div class="fc-item__liveblog-block__time"><%=relativeTime%></div>\n        <%=text%>\n    </div>\n</a>\n'},719:function(t,e,n){var o,i;o=[n(15),n(3),n(27),n(0),n(22),n(7),n(134),n(10),n(410),n(480),n(222),n(793),n(858),n(862),n(861),n(864),n(865),n(866),n(867),n(860),n(572)],i=function(t,e,n,o,i,a,r,s,c,u,l,d,f,h,p,v,g,m,w,b,y){var k={showSnaps:function(){m.init(),a.on("modules:container:rendered",m.init)},showContainerShowMore:function(){a.addListeners({"modules:container:rendered":p.init,"page:front:ready":p.init})},showContainerToggle:function(){var t=function(t){n(".js-container--toggle",n(t||document)[0]).each(function(t){new h(t).addToggle()})};a.addListeners({"page:front:ready":t,"modules:geomostpopular:ready":y(t,".js-popular-trails")})},upgradeMostPopularToGeo:function(){o.switches.geoMostPopular&&(new f).go()},showWeather:function(){o.switches.weather&&a.on("page:front:ready",function(){b.init()})},showLiveblogUpdates:function(){i.isBreakpoint({min:"desktop"})&&a.on("page:front:ready",function(){g.show()})},finished:function(){a.emit("page:front:ready")}},_=function(){r.catchErrorsWithContext([["f-accessibility",u.shouldHideFlashingElements],["f-snaps",k.showSnaps],["f-show-more",k.showContainerShowMore],["f-container-toggle",k.showContainerToggle],["f-geo-most-popular",k.upgradeMostPopularToGeo],["f-lazy-load-containers",v],["f-stocks",d],["f-sponsorship",w],["f-weather",k.showWeather],["f-live-blog-updates",k.showLiveblogUpdates],["f-finished",k.finished]])};return{init:_}}.apply(e,o),!(void 0!==i&&(t.exports=i))},793:function(t,e,n){var o,i;o=[n(27),n(0),n(59),n(60),n(36),n(185),n(599),n(600),n(223),n(61)],i=function(t,e,n,o,i,a,r,s,c,u){function l(){return c(["uk/business","us/business","au/business"],e.page.pageId)}function d(){return n("/business-data/stocks.json",{mode:"cors"}).catch(function(t){o(t,{feature:"stocks"})})}function f(t){return t>0?"+"+t:""+t}function h(t){var e=u(t.stocks,function(t){return i(r,{name:t.name,deltaClass:"stocks__stock-value--"+t.trend,price:t.price,change:f(t.change),closed:t.closed?'<div class="stocks__closed">closed</div>':"",closedInline:t.closed?'<div class="stocks__closed--inline">closed</div>':"",marketDownIcon:a("marketDownIcon",["stocks__icon","stocks__icon--down"]),marketUpIcon:a("marketUpIcon",["stocks__icon","stocks__icon--up"]),marketSameIcon:a("marketSameIcon",["stocks__icon","stocks__icon--same"])})}).join("");return i(s,{stocks:e})}return function(){var e=t(".js-container--first .js-container__header");l()&&e&&d().then(function(t){t.stocks.length>0&&e.append(h(t))})}}.apply(e,o),!(void 0!==i&&(t.exports=i))},858:function(t,e,n){var o,i;o=[n(3),n(27),n(0),n(7),n(395),n(37)],i=function(t,e,n,o,i,a){function r(){i.begin("most-popular")}function s(t){e(".js-tabs-content",t).addClass("tabs__content--no-border"),e(".js-tabs",t).addClass("u-h")}return a.define(r),r.prototype.endpoint="/most-read-geo.json",r.prototype.isNetworkFront="Network Front"===n.page.contentType,r.prototype.isVideoFront="video"===n.page.pageId,r.prototype.isInternational="international"===n.page.pageId,r.prototype.manipulationType="html",r.prototype.prerender=function(){this.elem=t(".headline-list",this.elem)[0]},r.prototype.go=function(){var e=this.isNetworkFront?".js-tab-1":".js-tab-2";this.parent=t(".js-popular-trails")[0],this.parent&&(this.isInternational&&this.isNetworkFront||this.isVideoFront?s(this.parent):(this.tab=t(e,this.parent)[0],this.fetch(this.tab,"html")))},r.prototype.ready=function(){this.isNetworkFront&&s(this.parent),i.end("most-popular"),o.emit("modules:geomostpopular:ready")},r}.apply(e,o),!(void 0!==i&&(t.exports=i))},859:function(t,e,n){var o,i;o=[n(21),n(27),n(59),n(7),n(60),n(83),n(565),n(229)],i=function(t,e,n,o,i,a,r,s){function c(c){var u=null,l=null,d="",f="",h="",p={13:"enter",38:"up",40:"down"},v=c||{},g=v.container,m=v.apiUrl;return{init:function(){this.bindElements(g),this.bindEvents()},bindElements:function(t){u=e(".js-search-tool-list",t),l=e(".js-search-tool-input",t)},bindEvents:function(){t.on(document.body,"keyup",this.handleKeyEvents.bind(this)),t.on(document.body,"click",this.handleClick.bind(this)),o.on("autocomplete:toggle",this.toggleControls.bind(this))},hasInputValueChanged:function(){return d.length!==f.length},handleClick:function(t){var n=e(t.target).hasClass("js-search-tool-input"),i=this.isLink(t.target);n?(t.preventDefault(),o.emit("autocomplete:toggle",!0)):i?(t.preventDefault(),e(".active",u).removeClass("active"),e(i).addClass("active"),this.pushData()):o.emit("autocomplete:toggle",!1)},isLink:function(t){return e(t).hasClass("js-search-tool-link")?t:e.ancestor(t,"js-search-tool-link")},toggleControls:function(t){var n=e(".js-search-tool-input")[0],o=e(".js-search-tool"),i=e(".js-close-location"),a=e(".js-edit-location");t?(h=n.value,o.addClass("is-editing"),n.setSelectionRange(0,n.value.length),i.removeClass("u-h"),a.addClass("u-h")):(o.removeClass("is-editing"),this.clear(),this.setInputValue(h),i.addClass("u-h"),a.removeClass("u-h"))},pushData:function(){var t=e(".active",u),n={},i="set";if(0===t.length){if(""!==l.val())return!1;i="remove"}return n={id:t.attr("data-weather-id"),city:t.attr("data-weather-city"),store:i},o.emit("autocomplete:fetch",n),this.setInputValue(),h=n.city,l.blur(),setTimeout(this.destroy.bind(this),50),n},getListOfResults:function(t){return f=t.target.value,t.target.value.match(/\S/)?void(this.hasInputValueChanged()&&this.fetchData()):(this.clear(),void(d=""))},fetchData:function(){return n(m+f,{mode:"cors"}).then(function(t){this.renderList(t,5),d=f}.bind(this)).catch(function(t){i(t,{feature:"search-tool"})})},handleKeyEvents:function(t){var n=p[t.which||t.keyCode];e(t.target).hasClass("js-search-tool-input")&&("down"===n?(t.preventDefault(),this.move(1)):"up"===n?(t.preventDefault(),this.move(-1)):"enter"===n?this.pushData():this.getListOfResults(t))},move:function(t){var n=e(".active",u),o=parseInt(n.attr("id"),10);isNaN(o)&&(o=-1),n.removeClass("active"),this.getNewId(o+t)<0?this.setInputValue(d):(e("#"+this.getNewId(o+t)+"sti",u).addClass("active"),this.setInputValue())},getNewId:function(t){var n=e("li",u).length,o=t%n;return o<-1?o=n-1:t===n&&(o=-1),o},setInputValue:function(t){var n=t||e(".active",u).attr("data-weather-city");l.val(n)},renderList:function(t,e){var n=document.createDocumentFragment(),o=t.length-e;s(t).and(r,o).and(a,function(t,e){var o=document.createElement("li");o.className="search-tool__item",o.innerHTML='<a role="button" href="#'+t.id+'" id="'+e+'sti" class="js-search-tool-link search-tool__link'+(0===e?' active"':'"')+' data-link-name="weather-search-tool" data-weather-id="'+t.id+'" data-weather-city="'+t.city+'">'+t.city+' <span class="search-tool__meta">'+t.country+"</span></a>",n.appendChild(o)}),this.clear().append(n)},clear:function(){return u.html("")},destroy:function(){this.clear()}}}return c}.apply(e,o),!(void 0!==i&&(t.exports=i))},860:function(t,e,n){var o,i;o=[n(21),n(3),n(60),n(27),n(0),n(22),n(59),n(7),n(36),n(133),n(859),n(223)],i=function(t,e,n,o,i,a,r,s,c,u,l,d){var f=null,h=null,p="weather-location";return{init:function(){return!!(i.switches&&i.switches.weather&&this.isNetworkFront())&&void this.getDefaultLocation()},isNetworkFront:function(){return d(["uk","us","au","international"],i.page.pageId)},getUserLocation:function(){var t=u.get(p);if(t&&t.id)return t},getWeatherData:function(t){return r(t,{mode:"cors"})},saveUserLocation:function(t){u.set(p,{id:t.id,city:t.city})},getDefaultLocation:function(){var t=this.getUserLocation();return t?void this.fetchWeatherData(t):this.getWeatherData(i.page.weatherapiurl+".json").then(function(t){this.fetchWeatherData(t)}.bind(this)).catch(function(t){n(t,{feature:"weather"})})},fetchWeatherData:function(t){return this.getWeatherData(i.page.weatherapiurl+"/"+t.id+".json?_edition="+i.page.edition.toLowerCase()).then(function(e){this.render(e,t.city),this.fetchForecastData(t)}.bind(this)).catch(function(t){n(t,{feature:"weather"})})},clearLocation:function(){u.remove(p),h.setInputValue()},fetchForecastData:function(t){return this.getWeatherData(i.page.forecastsapiurl+"/"+t.id+".json?_edition="+i.page.edition.toLowerCase()).then(function(t){this.renderForecast(t)}.bind(this)).catch(function(t){n(t,{feature:"weather"})})},saveDeleteLocalStorage:function(t){"set"===t.store?(this.saveUserLocation(t),this.fetchWeatherData(t)):"remove"===t.store&&(this.clearLocation(),this.getDefaultLocation())},bindEvents:function(){t.on(document.body,"click",".js-toggle-forecast",function(t){t.preventDefault(),this.toggleForecast()}.bind(this)),s.on("autocomplete:fetch",this.saveDeleteLocalStorage.bind(this))},toggleForecast:function(){o(".weather").toggleClass("is-expanded")},addSearch:function(){h=new l({container:o(".js-search-tool"),apiUrl:i.page.locationapiurl}),h.init()},render:function(t,e){this.attachToDOM(t.html,e),this.bindEvents(),this.addSearch(),this.render=function(t,e){this.attachToDOM(t.html,e),h.bindElements(o(".js-search-tool")),a.isBreakpoint({max:"phablet"})&&window.scrollTo(0,0)}},attachToDOM:function(t,e){f=o("#headlines .js-container__header"),o(".js-weather",f).remove(),f.append(t.replace(new RegExp("<%=city%>","g"),e))},renderForecast:function(t){var e=o(".js-weather-forecast"),n=t.html;e.empty().html(n)}}}.apply(e,o),!(void 0!==i&&(t.exports=i))},861:function(t,e,n){var o,i;o=[n(15),n(18),n(3),n(27),n(0),n(59),n(7),n(60),n(492),n(133),n(260),n(224),n(61),n(83),n(135)],i=function(t,e,n,o,i,a,r,s,c,u,l,d,f,h,p){function v(t,e){var n=t.text[e];t.$textEl.html(n),t.$el.attr("data-link-name",e===$?"less":"more").toggleClass("button--primary",e!==$).toggleClass("button--tertiary",e===$).toggleClass(M,e===O),t.$container.toggleClass(I,e!==$).toggleClass(L,e===$),t.state=e}function g(t,e){var n=u.get(E,{type:"session"})||{};e!==$?delete n[t]:n[t]="more",u.set(E,n,{type:"session"})}function m(t){var e=u.get(E,{type:"session"});return e&&e[t]?$:N}function w(t){e.write(function(){v(t,t.state===N?$:N),g(t.id,t.state)})}function b(t){e.write(function(){t.$container.addClass(I).removeClass("js-container--fc-show-more").toggleClass(I,t.state===N),v(t,t.state)})}function y(t,e){var n="/"+t+"/show-more/"+e+".json";return c(W,a(n,{mode:"cors"}))}function k(e,n){var i=x(e),a=t.create(n);return o(T,a).each(function(e){var n=t(e);n.attr(F)in i&&n.remove()}),a}function _(t){e.write(function(){v(t,O)}),y(i.page.pageId,t.id).then(function(n){var o,i=n.html.trim();i&&(o=k(t.$container,i)),e.write(function(){o&&t.$placeholder.replaceWith(o),v(t,$),g(t.id,t.state),r.emit("modules:show-more:loaded")}),t.isLoaded=!0}).catch(function(n){e.write(function(){v(t,N)}),C(t),s(n,{feature:"container-show-more"},!1)})}function j(t){e.write(function(){t.addClass("show-more__error-message--invisible")})}function C(n){n.$errorMessage&&n.$errorMessage.remove(),n.$errorMessage=t(t.create('<div class="show-more__error-message">Sorry, failed to load more stories. Please try again.</div>')),e.write(function(){n.$errorMessage.insertAfter(n.$el),setTimeout(function(){j(n.$errorMessage)},5e3)})}function x(e){return l(n(T,e),function(e){return t(e).attr(F)})}function D(t){var e,n,i,a=o(".js-show-more-button",t);if(a)return e=t.attr("data-id"),n=m(e),i={$el:a,$container:t,$iconEl:o(".i",a),$placeholder:o(".js-show-more-placeholder",t),$textEl:o("."+S,a),id:e,text:{hidden:o(".js-button-text",a).text(),displayed:"Less",loading:"Loading&hellip;"},state:n,isLoaded:!1,$errorMessage:null},n===$&&_(i),i}var I="fc-show-more--hidden",L="fc-show-more--visible",S="js-button-text",E="section-states",M="collection__show-more--loading",F="data-id",T=".js-fc-item",$="displayed",N="hidden",O="loading",W=5e3;return{itemsByArticleId:x,dedupShowMore:k,init:function(){e.read(function(){var e=n(".js-container--fc-show-more").map(t),o=d(f(e,D));h(o,b),r.on("module:clickstream:click",function(t){var e=p(o,function(e){return e.$el[0]===t.target});e&&e.state!==O&&(e.isLoaded?w(e):(e.$errorMessage&&e.$errorMessage.hide(),_(e)))})})}}}.apply(e,o),!(void 0!==i&&(t.exports=i))},862:function(t,e,n){var o,i;o=[n(21),n(15),n(18),n(27),n(7),n(133),n(36),n(185),n(627)],i=function(t,e,n,o,i,a,r,s,c){return function(t){function u(t){v=t,n.write(function(){l["displayed"===v?"removeClass":"addClass"]("fc-container--rolled-up"),d.attr("data-link-name",p["displayed"===v?"hidden":"displayed"]),f.text(p[v])})}var l=e(t),d=e(e.create(r(c,{text:"Hide",dataLink:"Show",icon:s("arrowicon")}))),f=o(".fc-container__toggle__text",d[0]),h="container-states",p={hidden:"Show",displayed:"Hide"},v="displayed",g=function(t,e){var n=a.get(h),o=t;"displayed"===e?delete n[o]:(n||(n={}),n[o]="closed"),a.set(h,n)},m=function(t){var e=a.get(h);e&&e[t]&&u("hidden")};a.remove("front-trailblocks"),this.addToggle=function(){var t=l.attr("data-id"),e=o(".js-container__header",l[0]);n.write(function(){e.append(d),l.removeClass("js-container--toggle").addClass("fc-container--has-toggle"),m(t)}),i.on("module:clickstream:click",function(e){e.target===d[0]&&(u("displayed"===v?"hidden":"displayed"),g(t,v))})}}}.apply(e,o),!(void 0!==i&&(t.exports=i))},863:function(t,e,n){var o,i;o=[n(15),n(22)],i=function(t,e){var n={resizeIfPresent:function(n){if("mobile"!==e.getBreakpoint()&&n){var o=t(n);o.css("height",o.parent().css("height"))}}};return n}.apply(e,o),!(void 0!==i&&(t.exports=i))},864:function(t,e,n){var o,i;o=[n(18),n(3),n(22),n(7),n(232)],i=function(t,e,n,o,i){function a(t){var e=t.nextElementSibling.getBoundingClientRect().top;return-s<e&&e<2*s}function r(t){t.classList.remove("fc-container--lazy-load")}var s=n.getViewport().height;return function(){var n=e(".js-container--lazy-load"),s=i(function(){0===n.length?o.off("window:throttledScroll",s):t.read(function(){var e=n.reduce(function(t,e){return t[a(e)?"in":"out"].push(e),t},{in:[],out:[]});n=e.out,t.write(function(){e.in.forEach(r)})})},500);o.on("window:throttledScroll",s),s()}}.apply(e,o),!(void 0!==i&&(t.exports=i))},865:function(t,e,n){var o,i;o=[n(15),n(397),n(27),n(229),n(22),n(58),n(59),n(7),n(10),n(36),n(628),n(138),n(581),n(83),n(41),n(224),n(412),n(61)],i=function(t,e,n,o,i,a,r,s,c,u,l,d,f,h,p,v,g,m){function w(t){var n=(t||{}).publishedDateTime,o=!!n&&e.makeRelativeDate(new Date(n));return o||""}function b(t,e,n){var o=w(e);return o=o.match(/yesterday/i)?o.toLowerCase():o?"Latest update "+o+" ago":"Updated just now",u(l,{ariaHidden:!e.isNew,href:"/"+t+"#"+e.id,relativeTime:o,text:d([e.title,e.body.slice(0,500)]).join(". "),index:n+1})}function y(e,n,i,r){var s=f(r);h(n,function(n){var c=!1,u=["fc-item__liveblog-blocks__inner","u-faux-block-link__promote"],l=o(i).slice(0,2).and(m,function(t,n){return!c&&(t.publishedDateTime>r||s)&&(t.isNew=!0,c=!0,u.push("fc-item__liveblog-blocks__inner--offset")),b(e,t,n)}).slice(0,c?2:1).value(),d=t.create('<div class="'+u.join(" ")+'">'+l.join("")+"</div>"),f=t(n);a.write(function(){f.append(d)}).then(function(){c&&k(d[0])})})}function k(t){_(t).then(function(e){var n;e||(n=p(function(){_(t,!0).then(function(t){t&&s.off("window:throttledScroll",n)})},D),s.on("window:throttledScroll",n))})}function _(e,n){return a.read(function(){return e.getBoundingClientRect().top}).then(function(o){if(o>0&&o<T)return setTimeout(function(){var n=t(e);a.write(function(){n.removeClass("fc-item__liveblog-blocks__inner--offset")})},n?0:x),!0})}function j(t){return v(t,function(t){return t.id&&t.publishedDateTime&&t.body&&t.body.length>=10})}function C(){return a.read(function(){var t={};return n(E).each(function(e){var n=e.getAttribute(M);n&&(t[n]=t[n]||[],t[n].push(e))}),t}).then(function(t){var e;g(t)||(e=c.session.get(F)||{},h(t,function(t,n){r("/"+n+".json?rendered=false",{mode:"cors"}).then(function(o){var i=o&&j(o.blocks);i&&i.length&&(y(n,t,i,e[n]),e[n]=i[0].publishedDateTime,c.session.set(F,e))}).catch(function(){})}),S&&(S-=1,setTimeout(function(){C()},1e3*I),I*=L))})}var x=2e3,D=500,I=30,L=1,S=5,E=".js-liveblog-blocks",M="data-article-id",F="gu.liveblog.block-dates",T=i.getViewport().height;return{show:C}}.apply(e,o),!(void 0!==i&&(t.exports=i))},866:function(t,e,n){var o,i;o=[n(21),n(15),n(18),n(27),n(22),n(137),n(7),n(36),n(410),n(422),n(60),n(397),n(863),n(411),n(135),n(23)],i=function(t,e,n,o,i,a,r,s,c,u,l,d,f,h,p,v){function g(){var t=c(o(".facia-snap-embed"));t.forEach(_);var e=c(o(".js-snappable.js-snap")).filter(function(t){var e=o(t).hasClass("facia-snap-embed"),n=t.getAttribute("data-snap-type");return!e&&n&&j.indexOf(n)>-1}).filter(function(t){return t.getAttribute("data-snap-uri")});e.forEach(k)}function m(t,e){w(t,e),o(t).hasClass("facia-snap--football")&&f.resizeIfPresent(t)}function w(t,o){var i,a,r=e(t),s="facia-snap-point--";a=[{width:0,name:"tiny"},{width:180,name:"mini"},{width:220,name:"small"},{width:300,name:"medium"},{width:700,name:"large"},{width:940,name:"huge"}],n.read(function(){i=t.offsetWidth}),n.write(function(){a.map(function(t,e,n){var a=i>=t.width&&(!n[e+1]||i<n[e+1].width);return t.action=a?"addClass":!!o&&"removeClass",t}).filter(function(t){return t.action}).forEach(function(t){r[t.action](s+t.name)})})}function b(t){var o=e(t).offset(),i=Math.ceil((o.width||0)/2),a=400,r=t.getAttribute("data-snap-uri"),s=Math.min(Math.max(o.height||0,i),a),c=e.create('<div style="width: 100%; height: '+s+'px; overflow: hidden; -webkit-overflow-scrolling:touch"></div>')[0],u=e.create('<iframe src="'+r+'" style="width: 100%; height: 100%; border: none;"></iframe>')[0];e(c).append(u),C.push(u),x(),n.write(function(){e(t).empty().append(c)})}function y(t,i){a(t.getAttribute("data-snap-uri"),{mode:"cors"}).then(function(t){return t.ok?i?t.json().then(function(t){return t.html}):t.text():v.reject(new Error("Fetch error: "+t.statusText))}).then(function(i){o.create(i).each(function(o){n.write(function(){e(t).html(o)})}),d.init(t)}).catch(function(t){l(t,{feature:"snaps"})})}function k(t){u.add(t,1500,function(){switch(n.write(function(){e(t).addClass("facia-snap-embed")}),m(t),t.getAttribute("data-snap-type")){case"document":b(t);break;case"fragment":y(t);break;case"json.html":y(t,!0)}i.isIOS||r.on("window:throttledResize",function(){m(t,!0)})})}function _(t){m(t),i.isIOS||r.on("window:throttledResize",function(){m(t,!0)})}var j=["document","fragment","json.html"],C=[],x=h(function(){t.on(window,"message",function(t){var n,o=p(C,function(e){return e.contentWindow===t.source});o&&(n=JSON.parse(t.data),"set-height"===n.type&&e(o).parent().css("height",n.value))})});return{init:g}}.apply(e,o),!(void 0!==i&&(t.exports=i))},867:function(t,e,n){var o,i;o=[n(21),n(15),n(18),n(23),n(3),n(61),n(579)],i=function(t,e,n,o,i,a,r){function s(){return new o(function(e){var n=function(o){d.push(o.keyCode),r(f.slice(0,d.length),d)?d.length===f.length&&(e(),t.off(document,"keydown",n)):d=[]};t.on(document,"keydown",n)})}function c(t,e){return Math.floor(Math.random()*(e-t+1))+t}function u(){return h[c(0,h.length-1)]}function l(){var t=a(i(".js-fc-item"),e);setInterval(function(){n.write(function(){t.forEach(function(t){h.forEach(function(e){t.removeClass(e)}),t.addClass(u())})})},1e3)}var d=[],f=[38,38,40,40,37,39,37,39,66,65],h=a(["special-report","live","dead","feature","editorial","comment","podcast","media","analysis","review","letters","external","news"],function(t){return"tone-"+t+"--item"});return function(){s().then(l)}}.apply(e,o),!(void 0!==i&&(t.exports=i))}});
//# sourceMappingURL=graun.facia.js.map