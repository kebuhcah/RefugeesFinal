/*
 Nielsen SDK package v5.1.0.5-9 
 (c) 2017 The Nielsen Company 
*/
/* PLDPR build v5.1.0.75-4*/
window.NOLCMB.registerLib("PLDPR",function(a){"use strict";function e(a,e){var t=[],r=a.split("&"),n,o;for(n=0,o=r.length;n<o;n+=1)0!==r[n].indexOf(e)&&t.push(r[n]);return t.join("&")}function t(a){return a<10?"0"+a:""+a}function r(a,e){var r=new Date(1e3*e),n=r.getUTCFullYear().toString(),o=t(r.getUTCMonth()+1),i=t(r.getUTCDate());D({data:a,param:"nol_dayId",val:Ba[r.getUTCDay()]}),D({data:a,param:"nol_hourCode",val:t(r.getUTCHours())}),D({data:a,param:"nol_dataDate",val:n+o+i})}function n(a,e){var t=a.split("||"),r=t[0]||a;if(window)for(var n=0,o=t.length;n<o;n+=1)r=t[n],"undefined"!=typeof window["on"+r]&&(window.addEventListener?window.addEventListener(r,e,!1):window.attachEvent&&window.attachEvent("on"+r,e))}function o(a,e){var t;if("num"==e)t=parseInt(a,10),a=isNaN(t)?0:t;else if("bin"==e)a=isNaN(Number(a))?"0":Number(a).toString(2);else if("bool"==e)switch(a.toString().toLowerCase()){case"false":case"no":case"0":case"":a=!1;break;default:a=!0}else"b2n"==e&&(t=parseInt(a,2),a=isNaN(t)?0:t);return a}function i(a){var e,t=[];for(e=0;e<o(a,"num");e+=1)t.push({tsv:0,save:!1,updated:!1});return t}function s(a){return{tags:[],eventQueue:a&&a.eventQueue?a.eventQueue:[],tagSize:1,bReInit:!1,debug:wa,eventQueueIndex:0}}function l(a){var t;void 0!==a&&0!==a.length&&(t=window.document.createElement("script"),t.type="text/javascript",t.src=e(a,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),t.onerror=function(a){var e=a.target.src;window.document.head?window.document.head.removeChild(a.target):window.document.getElementsByTagName("head")[0].removeChild(a.target),_a<va&&(_a+=1,window.setTimeout(function(){l(e)},5e3))},t.onload=function(a){_a=0,window.document.head?window.document.head.removeChild(a.target):window.document.getElementsByTagName("head")[0].removeChild(a.target)},window.document.head?window.document.head.appendChild(t):window.document.getElementsByTagName("head")[0].appendChild(t))}function d(){var e=Array.prototype.slice.call(arguments);a._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function p(a){return encodeURIComponent(a).replace("'","%27")}function m(a){var e=0===ra.indexOf("https")?"https":"http",t,r,n,o=a.url,i=a.hasOwnProperty("maskRef")?a.maskRef:-1;if("__sendIt"!==o&&"https"===e&&o.indexOf("https")===-1&&(o=e+o.substr(o.indexOf("://"))),a.prod&&"ocr"===a.prod&&o.indexOf("&ty=js")!==-1)return void l(o);if(Ta||"__sendIt"===o)if(o&&Ta&&Pa)Sa.push(o);else if("__sendIt"!==o||Pa)o&&Ta&&!Pa&&ga.push(o);else{for(Pa=!0,t=0,r=ga.length;t<r;t+=1)xa.setup({pingSendTime:a&&a.baseSvrTime?a.baseSvrTime:P(a.serverTimeOffset),url:ga.shift(),maskRefUrl:i});ga=ga.concat(Sa),Pa=!1,Sa=[]}else xa.setup({pingSendTime:a&&a.baseSvrTime?a.baseSvrTime:P(a.serverTimeOffset),url:o,maskRefUrl:i})}function c(a,e){var t="",r,n,o,i;if(!a||!e)return a;for(i=e.length,n=0,o=a.length;n<o;n+=1)r=a.charCodeAt(n)^e.charCodeAt(n%i),t+=0===r?a.charAt(n):String.fromCharCode(r);return t}function u(e,t,r,n){var o,i;r.indexOf("[")===-1&&r.indexOf("]")===-1&&(!n.val||n.val.length<=0)?(f(e,{type:"100",msg:r+" missing -- "+D({data:e,param:"nol_comment"})}),n.state=!1,n.val=""):"{"===t||"}"===t?n.val=a.CryptoJS.MD5(n.val.toString()).toString():"<"===t||">"===t?(o=r.match(da["<"].end),o?(i=o[0].match(/[\d]+/g),n.val=String(n.val).substr(i[0],i[1])):n.val=c(String(n.val),D({data:e,param:"nol_xorSeed"}))):"("!==t&&")"!==t||(n.val=p(n.val))}function _(a,e){var t=e.match(/[\[\{<\(]/g),r,n,o,i,s,l,d,p,m,c,_,v,g=D({data:a,param:"nol_xorSeed"})||"",y,T;if(t=t?t.reverse():[],n=e.match(/[\}\]\>\)]/g)||[],i={start:t.length?e.lastIndexOf(String(t[0])):-1,end:n.length?e.indexOf(String(n[0])):e.length},n&&">"===n[0]&&(i.end=e.search(da["<"].end)||e.indexOf(">")),l=e.substring(i.start+1,i.end),m=l.split("||"),m.length>0)for(c=0,_=m.length;c<_&&(l=m[c],v=D({data:a,param:l}),!(v&&v.length>0));c+=1);else v=D({data:a,param:l});if(v&&v.length>0&&(T="string"==typeof l?l.split("_"):l,y=T[0]?T.splice(0,2).join("_"):T,s=Ca[y]?Ca[y].encoding:"",s&&(t=t.reverse().concat(s.match(/[\[\{<\(]/g)).reverse(),n=n.reverse().concat(s.match(/[\}\]>\)]/g)).reverse())),r={val:v,state:D({data:a,param:"nolPriv_sendData"})},d=t?t.length:0,p=n?n.length:0,o=Math.min(d,p),o>0)for(c=0,_=o;c<_;c+=1)u(a,t[0]||n[0],e,r,g),t.shift(),n.shift();else(!r.val||r.val&&r.val.length<=0)&&(r.state=!1,r.val="",f(a,{type:100,msg:l+" missing "+D({data:a,param:"nol_comment"})}));return{val:r.val,strManipulate:t,strManiEnd:n}}function v(a,e){var t,r,n={val:"",state:D({data:a,param:"nolPriv_sendData"})},o=D({data:a,param:"nol_md5Seed"}),i,s,l,d=[],p,m=[],c=[],v,f="",g,y,T,h,P,S,w=D({data:a,param:"nol_xorSeed"});if(e=e||D({data:a,param:"nol_url"})||"",r=e.match(pa.regex),null!==r)for(y=0,T=r.length;y<T;y+=1){if(t=r[y],i=t.substr(pa.length,t.length-2*pa.length),s=i.split("+"),d=[],f="",l=0,s&&s.length>1){for(h=0,P=s.length;h<P;h+=1)if(f=s[h],p=_(a,f),p.strManipulate.length>0&&(l=d.length,m=[].concat(p.strManipulate,m)),d[l]=d[l]?d[l]+p.val:p.val,p.strManiEnd.length>0&&p.strManiEnd.length!==m.length){for(c=[].concat(c,p.strManiEnd),n={val:d[l],state:D({data:a,param:"nolPriv_sendData"})},v=0,S=p.strManiEnd.length;v<S;v+=1)u(a,m[0],f,n,w),m.shift(),c.shift();d[l]=n.val}for(n.val=d.join(""),g=m.length>=c.length?m:c,v=0,S=g.length;v<S;v+=1)u(a,g[0],f,n,w),m.shift(),c.shift()}else p=_(a,i),n={val:p.val,state:D({data:a,param:"nolPriv_sendData"})};e=e.replace(t,n.val)}return e}function f(e,t,r,n){var o,i,s=D({data:e,param:"nolPriv_errorSent"});n!==!0&&D({data:e,param:"nolPriv_sendData",val:!1}),(r||(!t||s.indexOf(t.type.toString()))===-1)&&Ra.isInitialized(e)&&(o=t.type+","+p(t.msg),D({data:e,param:"nol_errorMessage",val:o}),a._listeners.fireEvent("error",{type:"error",msg:o}),i=v(e,D({data:e,param:"nol_errorURL"})),m({baseSvrTime:Ma(e),serverTimeOffset:D({data:e,param:"nolPriv_serverTimeOffset"}),url:i,maskRef:D({data:e,param:"nol_rfrmsk"})}),s+=t.type.toString()+",",D({data:e,param:"nolPriv_errorSent",val:s}))}function g(a){var e=!1;e&&d(a)}function y(a,e,t){t&&!t.serviceSending[e]&&(t.serviceSending[e]=!0,l(a))}function T(a,e){var t=a||6;return Math.ceil(e/t)*t||"0"}function h(a,e){var t=!1,r=0,n=!1,i=o(D({data:a,param:"nol_unQualSegmentValue"}),"num"),s=D({data:a,param:"nol_minutes"}),l=[],d=!!e&&e.save,p,m,c,u=o(D({data:a,param:"nol_segmentTimeSpent"}),"num"),_=o(D({data:a,param:"nol_sendQual"}),"num"),v=D({data:a,param:"nol_cadence"});for(p=0,m=s.length;p<m;p+=1)c=Math.floor(s[p].tsv/D({data:a,param:"nol_creditValue"})),c>=1?(s[p].save&&"daypart"!==D({data:a,param:"nol_cadence"})?l.push(0):(l.push(D({data:a,param:"nol_creditFlag"})),r+=1,t=!0),n=!0):(l.push(0),n=!1),d?s[p].save=n:(s[p].tsv=0,s[p].save=!1,s[p].updated=!1);return D({data:a,param:"nol_duration",val:l.join("")}),_&&(t=r>=_),o(D({data:a,param:"nol_minWonOverride"}),"bool")===!0&&(t=!0),t||"interval"!==v&&"streamduration"!==v||d||("S"===D({data:a,param:"nol_segmentPrefix"})&&i&&D({data:a,param:"nol_duration",val:T(i,u)}),t=u>1),t}function P(a){return"undefined"!=typeof a?(Ma()/1e3>>0)+a:Ma()/1e3>>0}function S(a){Number(a)===a&&a%1!==0&&window.console&&window.console.warn&&window.console.warn("Warning: nol_segmentTimeSpent is a float - should be an integer.")}function w(a,e){var t=D({data:a,param:"nol_url"})||"",r,n,s,l,p=0,c,u=D({data:a,param:"nol_playerId"}),_=o(D({data:a,param:"nol_maxPingCount"}),"num"),f=o(D({data:a,param:"nol_pingCount"}),"num"),y=!!e&&e.returnLength,T=D({data:a,param:"nol_cadence"}),P=D({data:a,param:"nol_eventFilter"}),w=o(D({data:a,param:"nol_maxLength"}),"num");if(D({data:a,param:"nol_pingCreationTime",val:Ma(a)/1e3>>0}),n=D({data:a,param:"nol_timeSpentViewing"}).content,s=D({data:a,param:"nol_timeSpentViewing"}).ad,l=D({data:a,param:"nol_timeSpentViewing"}).static,S(D({data:a,param:"nol_segmentTimeSpent"})),("dcrvideo"!==D({data:a,param:"nol_product"})||"1"===D({data:a,param:"nol_forceFireOnClose_content"})||!("dcrvideo"===D({data:a,param:"nol_product"})&&0===n.nol_segmentTimeSpent||"dcrstatic"===D({data:a,param:"nol_product"})&&0===l.nol_segmentTimeSpent)||"interval"!==T&&"streamduration"!==T||0!==s.nol_count||0!==s.nol_segmentTimeSpent)&&"false"===D({data:a,param:"nol_disabled"})&&(0===_||_>f)){if(Va.setNextTick(a,null,"content"),r=h(a,e)||"stream"===T||"impression"===T||"id3"===D({data:a,param:"nol_product"}),t=v(a,t),p=t.length,D({data:a,param:"nolPriv_sendData"})&&r&&!y||w>0&&w<p){if(D({data:a,param:"nol_id3Data"})&&D({data:a,param:"nol_id3Data",val:!1}),d(D({data:a,param:"nol_comment"})," -queued @"+Math.floor(Ma(a)/1e3)+", timeOffset == "+D({data:a,param:"nolPriv_serverTimeOffset"})+", DU == "+D({data:a,param:"nol_segmentTimeSpent"})+" -- ",t),P.onSendPing&&(x(a,P.onSendPing),"true"===D({data:a,param:"nol_disabled"})))return;m({baseSvrTime:Ma(a),serverTimeOffset:D({data:a,param:"nolPriv_serverTimeOffset"}),url:t,prod:D({data:a,param:"nol_product"}),maskRef:D({data:a,param:"nol_rfrmsk"})}),D({data:a,param:"nol_viewCount_"+a._currVidType.toLowerCase(),val:"0"}),Va.clear(a),ca&&ca.hasOwnProperty(u)&&ca[u].hasOwnProperty("debug")&&"logging"===ca[u].debug&&(c=D({data:a,param:"nol_debugUrl"}),c||(c=D({data:a,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?"),c+="pli="+u+"&sendPing="+D({data:a,param:"nol_product"})+"&"+t.substring(t.indexOf("?")+1),g(c)),f+=1,n.nol_segmentTimeSpent=0,n.nol_count=0,s.nol_segmentTimeSpent=0,s.nol_count=0,l.nol_segmentTimeSpent=0,l.nol_count=0,D({data:a,param:"nol_pingStartTimeUTC",val:Math.round(Ma(a)/1e3)}),D({data:a,param:"nolPriv_priority",val:0}),D({data:a,param:"nol_pingCount",val:f.toString()}),D({data:a,param:"nol_forceFireOnClose_content",val:"0"});var b=i(D({data:a,param:"nol_segmentLength"}));D({data:a,param:"nol_duration",val:new Array(b.length+1).join("0")})}else if(y)return{len:p,fData:t};return null}}function b(e){try{if("undefined"==typeof e)return;var t=i(D({data:e,param:"nol_segmentLength"}));D({data:e,param:"nol_minutes",val:t}),D({data:e,param:"nol_duration",val:new Array(t.length+1).join("0")})}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function O(a,e){var t=o(D({data:a,param:"nol_segmentLength"}),"num")*o(D({data:a,param:"nol_segmentValue"}),"num"),r={segment:Math.floor(e/t+1),minute:Math.floor(e%t/D({data:a,param:"nol_segmentValue"})),seconds:e%D({data:a,param:"nol_segmentValue"})};return r}function C(e,t){var n,s=D({data:t,param:"nol_tagSrc"}),e=""!==e?e:"id3"===s&&D({data:t,param:"nol_fdcid"})!==D({data:t,param:"nol_cidNull"})?D({data:t,param:"nol_fdoffset"}):"id3"===s&&D({data:t,param:"nol_pccid"})!==D({data:t,param:"nol_cidNull"})?D({data:t,param:"nol_pcoffset"}):e,l=D({data:t,param:"nol_eventFilter"}),d=D({data:t,param:"nol_minutes"}),p=o(D({data:t,param:"nol_pingCount"}),"num"),m,c,u,_,v,f,g,y,T=D({data:t,param:"nol_playerId"}),h=a._players&&a._players.hasOwnProperty(T)?a._players[T]:-1,P=D({data:t,param:"nol_localDay"}),S=D({data:t,param:"nol_dayQhr"}),b=D({data:t,param:"nol_weekQhr"}),C,L,E,k=D({data:t,param:"nol_wmDay"}),I=D({data:t,param:"nol_wmDayQhr"}),A,M,V=o(D({data:t,param:"nol_weekEndUTC"}),"num"),R=o(D({data:t,param:"nol_weekStartUTC"}),"num"),N=V-R,F,B=o(D({data:t,param:"nolPriv_serverTimeOffset"}),"num"),j,U=D({data:t,param:"nol_timer"})||"nol_fdoffset",Q=o(D({data:t,param:"nolPriv_currMin"}),"num"),G=o(D({data:t,param:"nol_maxPingCount"}),"num"),W=o(D({data:t,param:"nol_creditValue"}),"num"),q=o(e,"num"),z=o(D({data:t,param:"nol_intrvlThrshld"}),"num")||86400,H="nol_cmsoffset"===U||"nol_pageoffset"===U?o(D({data:t,param:"nol_cmsIntrvlGp"}),"num")||2:o(D({data:t,param:"nol_id3IntrvlGp"}),"num"),Y=o(D({data:t,param:"nol_segmentLength"}),"num")*o(D({data:t,param:"nol_segmentValue"}),"num"),K=o(D({data:t,param:"nol_currSeg"}),"num"),X=o(D({data:t,param:"nolPriv_now"}),"num"),Z,$=D({data:t,param:"nol_timeSpentViewing"})[t._currVidType],aa=o(D({data:t,param:"nolPriv_currPos"}),"num");if(A=Math.floor(q/86400)+1,k||D({data:t,param:"nol_wmDay",val:A}),M=Math.floor(q%86400/900)+1,I||D({data:t,param:"nol_wmDayQhr",val:M}),q>86400&&"nol_cmsoffset"===U?(q+=B,y=q+o(D({data:t,param:"nol_startDayTimeOffset"}),"num"),f=y+o(D({data:t,param:"nol_GMTOffset"}),"num")):y=f=q,C=Math.floor(f/86400)+1,P&&P!=C&&w(t),P||D({data:t,param:"nol_localDay",val:C}),q>V&&(l.onWeekEndUTC?x(t,l.onWeekEndUTC):(D({data:t,param:"nol_week",val:D({data:t,param:"nol_nextWeek"})}),D({data:t,param:"nol_period",val:D({data:t,param:"nol_nextPeriod"})}),D({data:t,param:"nol_weekStartUTC",val:V+1}),D({data:t,param:"nol_weekEndUTC",val:V+1+N}))),L=Math.floor((q-o(D({data:t,param:"nol_weekStartUTC"}),"num"))/900)+1,b&&L===b||D({data:t,param:"nol_weekQhr",val:L}),"nol_cmsoffset"===U&&(q=f%86400),E=Math.floor(q/900)+1,S||D({data:t,param:"nol_dayQhr",val:E}),q=Math.floor(q),"1"===D({data:t,param:"nol_applyViewInc"})&&(J(t),D({data:t,param:"nol_applyViewInc",val:"0"})),!("true"===D({data:t,param:"nol_disabled"})||void 0===q||G>0&&G<=p&&"daypart"!==D({data:t,param:"nol_cadence"}))){var ea=D({data:t,param:"nol_devTimeZone"}),ta=/^GMT([-+]?)([0-9]+):([0-9]+)$/.exec(ea);if(ta){var ra="-"==ta[1]?-60:60;r(t,Ma(t)/1e3+ra*(60*Number(ta[2])+Number(ta[3])))}if("stream"!==D({data:t,param:"nol_cadence"})&&"impression"!==D({data:t,param:"nol_cadence"})){if(aa=""===aa?q:o(aa,"num"),X||(X=Ma(t)),j=Math.ceil((Ma(t)-X)/1e3)||1,Z=O(t,aa),n=Z.segment,F=Z.minute,m=Z.seconds,v=q-aa,D({data:t,param:"nolPriv_currPos",val:q}),K&&void 0!==n&&K!==n&&(("dcrvideo"!==D({data:t,param:"nol_product"})||"dcrvideo"===D({data:t,param:"nol_product"})&&D({data:t,param:"nol_segmentTimeSpent"})>0)&&w(t,{save:!0}),"episode"!==D({data:t,param:"nol_cadence"})&&D({data:t,param:"nol_pingCount",val:0}),d=i(D({data:t,param:"nol_segmentLength"})),D({data:t,param:"nol_minutes",val:d}),S&&S!==E&&(D({data:t,param:"nol_dayQhr",val:E}),D({data:t,param:"nol_weekQhr",val:L}),P&&P!==C&&D({data:t,param:"nol_localDay",val:C})),I&&I!==M&&D({data:t,param:"nol_wmDayQhr",val:M}),k&&k!==A&&D({data:t,param:"nol_wmDay",val:A})),K=n,void 0!==F&&v>0){if(Q!==F&&(d[F].save||"daypart"===D({data:t,param:"nol_cadence"})||(d[F].tsv>=W?w(t):(d[F].tsv=0,d[F].updated=!1))),v<H||v<=Math.ceil(1.5*j)&&v<z)for(g=o(D({data:t,param:"nol_sendQual"}),"num"),c=0;c<v;c+=1){if((m+c)%D({data:t,param:"nol_segmentValue"})!==0){if("daypart"!==D({data:t,param:"nol_cadence"})&&d[F].tsv>=D({data:t,param:"nol_segmentValue"})&&(d[F].save?(d[F].tsv=0,d[F].save=!1,d[F].updated=!1):w(t)),d[F].tsv+=1,$.nol_cumeTimeSpent+=1,$.nol_segmentTimeSpent+=1,d[F].tsv>=W&&g){for(d[F].updated||(D({data:t,param:"nolPriv_priority",val:Ma(t)}),d[F].updated=!0),u=0,_=0;u<d.length;u+=1)if(_+=d[u].tsv>=W?1:0,_>=g){g="send";break}"send"===g&&D({data:t,param:"nol_sendQual"})&&(l.onViewWon&&x(t,l.onViewWon),w(t,{save:!0}),g=0,"daypart"!==D({data:t,param:"nol_cadence"})&&D({data:t,param:"nol_sendQual",val:"0"}))}}else 0!==c&&(F+=1),d.length<=F?(w(t,{save:!0}),F=0,K+=1,D({data:t,param:"nol_currSeg",val:K}),D({data:t,param:"nol_pingCount",val:0}),d=i(D({data:t,param:"nol_segmentLength"})),D({data:t,param:"nol_minutes",val:d}),S&&S!==E&&(D({data:t,param:"nol_dayQhr",val:E}),D({data:t,param:"nol_weekQhr",val:L}),P&&P!==C&&D({data:t,param:"nol_localDay",val:C})),I&&I!==M&&D({data:t,param:"nol_wmDayQhr",val:M}),k&&k!==A&&D({data:t,param:"nol_wmDay",val:A})):"daypart"!==D({data:t,param:"nol_cadence"})&&!d[F].save&&d[F].tsv>=W?w(t):d[F].save||(d[F].tsv=1,d[F].updated=!1),$.nol_cumeTimeSpent+=1,$.nol_segmentTimeSpent+=1;D({data:t,param:"nolPriv_currMin",val:F})}D({data:t,param:"nolPriv_now",val:Ma(t)}),h!==-1&&"dcrstatic"!==D({data:t,param:"nol_product"})&&(h.pauseObj.pauseTime=0)}}else n=Math.floor(q/Y+1),"content"===D({data:t,param:"nol_ac"})&&(K=n,D({data:t,param:"nol_currSeg",val:K})),w(t);D({data:t,param:"nol_currSeg",val:K})}}function L(a,e,t){var r=D({data:a,param:"iag_"+e});return void 0!==r&&""!==r?t="&pr=iag."+e+","+p(r):t&&t.length>0&&t.indexOf("&pr=iag")===-1?t="&pr=iag."+e+","+p(t):void 0!==t&&null!==t||(t=""),t}function E(a,e){var t,r,n,i,s,l,d,m,c,u,_,v,f,g,y,T,h=D({data:a,param:"nol_vidtype"});D({data:a,param:"nol_prod"}).indexOf("iag")>=0&&(t="",r=L(a,"sid",D({data:a,param:"nol_sid",vidType:"content"})),n=L(a,"tfid",D({data:a,param:"nol_tfid",vidType:"content"})),i=L(a,"bcr",D({data:a,param:"nol_clientid",vidType:"content"})),l=L(a,"epi",D({data:a,param:"nol_title"})||D({data:a,param:"nol_title",vidType:"content"})),s=L(a,"pgm",D({data:a,param:"nol_censuscategory"})||D({data:a,param:"nol_category"})||D({data:a,param:"nol_iagcategory"})),s||(s=L(a,"pgm",D({data:a,param:"nol_censuscategory",vidType:"content"})||D({data:a,param:"nol_category",vidType:"content"})||D({data:a,param:"nol_iagcategory",vidType:"content"})),s||(s="&pr=iag.pgm,general")),d="&pr=iag.seg,",d+=o(D({data:a,param:"nol_chapter",vidType:"content"}),"num")>1?D({data:a,param:"iag_seg"})||D({data:a,param:"nol_chapter",vidType:"content"}):"1",m=L(a,"pd",m),c=L(a,"oad",c),f=L(a,"fp",f),T=L(a,"cust1",T),"ad"===e?(u="&pr=iag.brn,"+D({data:a,param:"nol_clientid"}),_="&pr=iag.cte,"+p(D({data:a,param:"nol_adURL"})),v="midroll"===h?"&pr=iag.ap,mid":"postroll"===h?"&pr=iag.ap,post":"&pr=iag.ap,pre",r=L(a,"sid",r),n=L(a,"tfid",n),i=L(a,"bcr",i),u=L(a,"brn",u),_=L(a,"cte",_),s=L(a,"pgm",s),l=L(a,"epi",l),d=L(a,"seg",d),m=L(a,"pd",m),c=L(a,"oad",c),g=L(a,"pod",g),y=L(a,"apt",y),t=r+n+i+s+l+d+m+u+v+_+c+f+g+y+T):t=r+n+i+s+l+d+m+c+f+T,t+="&pr=iag.cp,soc",D({data:a,param:"nol_iagData",val:t}))}function k(e){var t;if(ca[e.id]&&ca[e.id].tags.length===ca[e.id].tagSize){if(a._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e)}),ca[e.id].debug!==wa&&"logging"===ca[e.id].debug){if(t=ca[e.id].nol_debugUrl,t||(t=ca[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),ca[e.id].eventQueue.length>ca[e.id].eventQueueIndex+1)for(var r=ca[e.id].eventQueueIndex;r<ca[e.id].eventQueue.length;r++)g(t+"pli="+e.id+"&ggpm="+JSON.stringify(ca[e.id].eventQueue[r])),ca[e.id].eventQueueIndex=r;t+="pli="+e.id+"&ggpm="+JSON.stringify(e),g(t)}e.timeStamp=ca.hasOwnProperty(e.id)&&ca[e.id].nolPriv_baseSvrTime?Ma({type:"override",baseSvrTime:ca[e.id].nolPriv_baseSvrTime}):Ma();for(var r=0,n=ca[e.id].tags.length;r<n;r+=1)ca.hasOwnProperty(e.id)&&ca[e.id].tags[r].eventListener(e)}else ca[e.id]&&ca[e.id].eventQueue||(ca[e.id]=s(ca[e.id])),ca[e.id].eventQueue.push(e)}function I(a,e){var t,r;ca[e].bReInit||(ca[e].bReInit=!0,ca[e].eventQueue=[],a&&ca[e].eventQueue.push(a),l(Oa))}function A(a,e,t){var r=!1,n=t.toString().toLowerCase().indexOf(e.toString().toLowerCase());return"-"===a&&n===-1?r=!0:"+"===a&&(t===e||n!==-1&&t&&e)?r=!0:"--"===a&&e.toString().toLowerCase().indexOf(t.toString().toLowerCase())===-1?r=!0:"++"===a&&e.toString().toLowerCase().indexOf(t.toString().toLowerCase())!==-1&&(r=!0),r}function x(a,e,t){var r=e||D({data:a,param:"nol_finalFilter"}),n,o,i,s,l,d,p,m,c,u,_,v=t||{};if(r&&void 0!==r)for(n=0,o=r.length;n<o;n+=1){if(m=r[n],m.tagVar.length)for(var i=0,s=m.tagVar.length;i<s&&(u=D({data:a,param:m.tagVar[i].name}),u);i++);else u=D({data:a,param:m.tagVar.name});if(u&&m.tagVar.value===u){for(i=0,s=m.cond.length;i<s;i+=1){if(p=v[m.cond[i]]||D({data:a,param:m.cond[i]}),d=0===m.is.value.indexOf("nol_")&&D({data:a,param:m.is.value})?D({data:a,param:m.is.value}):m.is.value,void 0===p||void 0===d||!A(m.is.type,p,d)){c=!1;break}c=!0}if(void 0!==c&&(_=c?m.then:m.else,void 0!==_))for(l in _)_.hasOwnProperty(l)&&(void 0!==v.nol_vidtype?v[l]=_[l]:D({data:a,param:l,val:_[l]}))}}}function M(a,e){var t,r=a.data._settings,n=a.param;return void 0===e||null===e?(t=r.hasOwnProperty(n)&&ca[r.nol_playerId].nol_tagMap.hasOwnProperty(n)&&("object"==typeof ca[r.nol_playerId].nol_tagMap[n]||"array"==typeof ca[r.nol_playerId].nol_tagMap[n])?ca[r.nol_playerId].nol_tagMap[n][r[n]]:r.hasOwnProperty("nol_defaults")&&r.nol_defaults.hasOwnProperty(n)?r.nol_defaults[n]:ca[r.nol_playerId].nol_tagMap.nol_defaults[n]||ca[r.nol_playerId][n],void 0===t&&(t=r.hasOwnProperty(n)?r[n]:ca[r.nol_playerId].nol_tagMap[n])):r.hasOwnProperty("nol_defaults")&&r.nol_defaults.hasOwnProperty(n)?r.nol_defaults[n]=e:r[n]=e,t}function D(e){try{if(e){if("string"==typeof e.param&&e.param.indexOf("nol_")===-1&&e.param.indexOf("nolPriv_")===-1&&e.param.split("_").length-1>1)return;var t="string"==typeof e.param?e.param.split("_"):e.param,r,n=t[0]?t.splice(0,2).join("_"):t,o=e.vidType||t[0]||e.data._currVidType,i=e.data._currAssetid||"0",s="undefined"!=typeof e.data._dataArrObj[o][i]?e.data._dataArrObj[o][i]:e.data._dataArrObj[o][Object.keys(e.data._dataArrObj[o]).splice(-1,1)],l=Ca[n]?Ca[n].clientField:n;if("object"==typeof l)r=s;else if("nol_segmentTimeSpent"===l||"nol_cumeTimeSpent"===l||"nol_count"===l){var d=D({data:e.data,param:"nol_timeSpentViewing"});r=d[o][l]}else void 0===e.val||null===e.val?(r=s&&s.hasOwnProperty(l)?s[l]:ca[e.data._settings.nol_playerId][l],void 0!==r&&""!==r||(r=M(e)||"",void 0!==r&&""!==r||(0===l.indexOf("nol_")?e.param=l:e.param=n,r=M(e)||""))):s&&(s[l]=e.val);return r}return null}catch(e){window.console&&window.console.error&&window.console.error("Error in Data(): "+e.message+" __param: "+t),a._listeners.fireEvent("error",{type:"error",msg:"Error in Data(): "+e.message})}}function V(e,t){var r=Ra.findPlayer(e),n=r.oServiceCall[t.service],o=t.url,i=t.key,s;if(t.evntCB=D({data:e,param:e.serviceFlag[t.service].callback}),t.callBack=function(a){R(e,a,t)},!n&&i&&o&&o.length>0)"stnupdate"===t.evntCB&&("undefined"==typeof r.oServiceCall[t.service]||"undefined"==typeof r.oServiceCall[t.service].status||"init"!==r.oServiceCall[t.service].status&&"complete"!==r.oServiceCall[t.service].status)&&(r.oServiceCall[t.service]={status:"init",station:null,data:null}),a._listeners.addListener(t.evntCB,t.callBack,!0),y(v(e,o),t.service,r);else if(n&&"init"===n.status);else if(n&&"complete"===n.status&&i!==n.station)a._listeners.addListener(t.evntCB,t.callBack,!0),y(v(e,o),t.service,r);else if(n&&"complete"===n.status&&i===n.station){for(s in n.data)n.data.hasOwnProperty(s)&&D({data:e,param:s,val:n.data[s]});if(Ea?x(e,Ea[t.service]):x(e,La),"true"===D({data:e,param:"nol_disabled"}))return;e.serviceFlag[t.service].need&&(D({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[t.service].need=!1,C(D({data:e,param:"nol_queueTime"}),e))}else a._listeners.fireEvent(t.evntCB,t),window.setTimeout(function(){V(e,t)},1e3)}function R(a,e,t){var r={},n,i=0,s;if(D({data:a,param:"nol_playerId"})===e.target.nol_playerId){for(s in e.target)e.target.hasOwnProperty(s)&&(D({data:a,param:s,val:e.target[s]}),r[s]=e.target[s]);var l=Ra.findPlayer(a);if(l){var d="undefined"!=typeof l.oServiceCall[t.service]&&l.oServiceCall[t.service].hasOwnProperty("status")?l.oServiceCall[t.service].status:"undefined";l.oServiceCall[t.service]={status:"complete",prevStatus:d,station:t.key,data:r},l.serviceSending[t.service]=!1}if(Ea?x(a,Ea[t.service]):x(a,La),"true"===D({data:a,param:"nol_disabled"}))return;a.serviceFlag[t.service].need&&(D({data:a,param:"nol_davState",val:"1"}),a.serviceFlag[t.service].need=!1,e.target.hasOwnProperty("nol_fdTimeCode")&&"daypart"===D({data:a,param:"nol_cadence"})&&(i=o(e.target.nol_fdTimeCode,"num"),n=o(D({data:a,param:"nol_queueTime"}),"num"),D({data:a,param:"nol_queueTime",val:n+i})),C(D({data:a,param:"nol_queueTime"}),a))}}function N(a){return"id3"===D({data:a,param:"nol_product"})&&D({data:a,param:"nol_id3Data"})?void w(a):void("true"!==D({data:a,param:"nol_disabled"})&&"1"===D({data:a,param:"nol_davState"})&&(D({data:a,param:"nol_davState",val:"2"}),"daypart"===D({data:a,param:"nol_cadence"})?w(a,{save:!0}):w(a),b(a),D({data:a,param:"nol_disabled",val:"true"})))}function F(a){"dcrstatic"===D({data:a,param:"nol_product"})&&"stream"!==D({data:a,param:"nol_cadence"})||("content"===D({data:a,param:"nol_ac"})&&D({data:a,param:"nol_segmentTimeSpent"})>0||"streamduration"===D({data:a,param:"nol_cadence"})&&D({data:a,param:"nol_segmentTimeSpent"})>0||"dcrstatic"===D({data:a,param:"nol_product"})&&"stream"===D({data:a,param:"nol_cadence"})||"postroll"===D({data:a,param:"nol_vidtype"})&&"interval"===D({data:a,param:"nol_cadence"}))&&("content"===D({data:a,param:"nol_ac"})?w(a,{save:!0}):w(a),D({data:a,param:"nolPriv_now",val:0}))}function B(e,t){var r=null,n=Ma(e);try{e&&Va.isEnabled(e)&&(r=Na.inferEvent(t.currEvtType,e,t._param1,n,t._param3),r&&(r.event!==Na.events.play&&Ra.state.set(e,r),Va.preProcess(e,r)))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredEvent:r,timestamp:n}}function j(e,t){try{e&&t.inferredEvent&&(t.inferredEvent.event===Na.events.play&&Ra.state.set(e,t.inferredEvent),Va.postProcess(e,t.inferredEvent))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}function U(e){try{var t=D({data:e,param:"nol_playerId"});ca&&ca.hasOwnProperty(t)&&(!ca[t].hasOwnProperty("nol_sessionId")||ca[t].hasOwnProperty("forceStreamRegen")&&ca[t].forceStreamRegen===!0)&&(ca[t].nol_sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var e=16*Math.random()|0,t="x"==a?e:3&e|8;return t.toString(16)}),ca[t].forceStreamRegen=!1)}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function Q(e,t){var r=D({data:e,param:"nol_playerId"});if(r===t.id){if(!t.evtInfo||t.evtInfo.hasOwnProperty("param1")&&(null===t.evtInfo.param1||"undefined"==typeof t.evtInfo.param1))return void a._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid Param1 passed"});var n=t.evtInfo,s=n.param1,l=n.param3?n.param3:s.hasOwnProperty("param3")?s.param3:s,d,p,m,c,u=o(D({data:e,param:"nolPriv_id3Count"}),"num"),_,v,g,y=D({data:e,param:"nol_segmentSpentViewing"}),T=D({data:e,param:"nol_enableFilterMap"}),h="|mtvr|,|dprid3|,|id3|",P,S,b={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},O,L,k,A=D({data:e,param:"nol_prod"}),M,R={},Q=n.eventType.toString(),G,q="content",H,Y,K,X=D({data:e,param:"nolPriv_serverTimeOffset"}),Z=Ca.nol_vidtype?Ca.nol_vidtype.clientField:"nol_vidtype",$=Ca.nol_tagSrc?Ca.nol_tagSrc.clientField:"nol_tagSrc",aa=Ca.nol_assetid?Ca.nol_assetid.clientField:"nol_assetid",ea=Ca.nol_ac?Ca.nol_ac.clientField:"nol_ac",ta=Ca.nol_linearAdLoadFlag?Ca.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",ra=l[Z]?l[Z].toString().toLowerCase():"",na=Math.round(Ma(e)/1e3),oa="nol_assetid",ia=Ra.findPlayer(e),sa=B(e,{currEvtType:Q,_param1:s,_param3:l});switch(Q.toLowerCase()){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if(("14"===Q||"staticstart"===Q)&&"dcrstatic"!==D({data:e,param:"nol_product"}))return;if("14"!==Q&&"staticstart"!==Q&&"dcrstatic"===D({data:e,param:"nol_product"}))return;var la=","+D({data:e,param:"nol_contentType"});e._currVidType=ra&&la.indexOf(","+ra)!==-1?"content":"dcrstatic"===D({data:e,param:"nol_product"})?"static":"ad";var da=null,pa=null;if(("ad"===D({data:e,param:"nol_ac"})&&D({data:e,param:"nol_segmentTimeSpent"})>0&&"streamduration"===D({data:e,param:"nol_cadence"})||"stream"===D({data:e,param:"nol_cadence"})&&"dcrstatic"===D({data:e,param:"nol_product"})||"dcrstatic"===D({data:e,param:"nol_product"})&&String(e._currAssetid)!==String(l[aa]))&&N(e),D({data:e,param:"nol_onCompleteFired"})===!0?("content"!==e._currVidType&&"static"!==e._currVidType||("content"===e._currVidType.toLowerCase()&&ca[r].hasOwnProperty("forceStreamRegen")&&ca[r].forceStreamRegen===!0&&U(e),D({data:e,param:oa,val:-1}),"content"===e._currVidType?(da=Ra.state.clone(e),pa=Va.clone(e),W(e)):W(e,!0)),D({data:e,param:"nol_onCompleteFired",val:!1})):"14"!==Q&&"staticstart"!==Q||"stream"!==D({data:e,param:"nol_cadence"})||(D({data:e,param:oa,val:-1}),W(e)),"ad"===e._currVidType){var ma=i(D({data:e,param:"nol_segmentLength"}));D({data:e,param:"nol_minutes",val:ma}),D({data:e,param:oa,val:-1}),D({data:e,param:Z,val:ra})}if(e._currAssetid="daypart"===D({data:e,param:"nol_cadence"})||"stream"!==D({data:e,param:"nol_cadence"})&&"dcrstatic"===D({data:e,param:"nol_product"})?l[aa]:e._currAssetid,l.nol_ac=e._currVidType,o(D({data:e,param:"nol_serverTime"}),"num")+86400<Math.round(Ma(e)/1e3)+X)return N(e),void I(t,D({data:e,param:"nol_playerId"}));for(G=0,H=T.length;G<H;G+=1)d=Ca[T[G]]?Ca[T[G]].clientField:T[G],R[T[G]]=String(l[d]||"");if(_=l.hasOwnProperty(aa)?String(l[aa]):D({data:e,param:"nolPriv_assetid"}),x(e,La.onCmsDetected,R),"false"!==R.nol_disabled||!l)return void("cms"!==e._currTagSrc&&(z(e,"loadMetadata",l),D({data:e,param:"nol_disabled",val:"true"})));if("static"===e._currVidType&&"dcrstatic"===D({data:e,param:"nol_product"})?(a._listeners.fireEvent("updateCmbStaticPage",{evtInfo:n,plid:r}),q="static"):q="content",_!==D({data:e,param:oa})){if("ad"!==D({data:e,param:"nol_ac"})&&N(e),z(e,"loadMetadata",l),D({data:e,param:"nolPriv_assetid",val:D({data:e,param:oa})}),"15"!==Q&&"loadmetadata"!==Q||"id3"!==D({data:e,param:$,vidType:"content"})||D({data:e,param:"nolPriv_dtvrHybrid",vidType:"content"})!==!1||D({data:e,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),x(e,La.onAssetIdChanged),"true"===D({data:e,param:"nol_disabled"}))return;if("drm"===D({data:e,param:"nol_product"}))e.serviceFlag.stn.need=!0;else if(e.serviceFlag.stn.need=!1,"true"===D({data:e,param:"nol_disabled"}))return;if(x(e,La.onComplete),da&&Ra.state.bind(e,da),pa&&Va.bind(e,pa),"true"===D({data:e,param:"nol_disabled"}))return}if("ad"===e._currVidType&&"dcrvideo"===D({data:e,param:"nol_product"})&&"impression"!==D({data:e,param:"nol_cadence"})){var ua=D({data:e,param:"nol_timeSpentViewing"});ua[e._currVidType].nol_count++}D({data:e,param:"nol_pingStartTimeUTC",val:Math.round(Ma(e)/1e3)}),A.indexOf("iag")!==-1&&E(e,e._currVidType,Ca),("ad"===e._currVidType&&"dcrvideo"!==D({data:e,param:"nol_product"})||"stream"===D({data:e,param:"nol_cadence"}))&&(D({data:e,param:"nol_pingCount",val:0}),D({data:e,param:"nolPriv_sendData",val:!0}),D({data:e,param:"nol_davState",val:"0"}),e.serviceFlag.stn.need||"content"===e._currVidType||"nol_cmsoffset"!==D({data:e,param:"nol_timer"})&&"nol_pageoffset"!==D({data:e,param:"nol_timer"})||C(0,e)),"14"!==Q&&"staticstart"!==Q||"dcrstatic"!==D({data:e,param:"nol_product"})||ia.static.started===!0||(a.PLDCR.start(!0),ia.static.started=!0);break;case"5":case"play":if("mtvr"===D({data:e,param:"nol_product"})){if(k=Ca.nol_channelName?Ca.nol_channelName.clientField:"nol_channelName",l[k]&&l[k].length>0)for(Y in l)l.hasOwnProperty(Y)&&D({data:e,param:Y,val:l[Y]})}else"dcrvideo"===D({data:e,param:"nol_product"})&&(e._currVidType="content",R={nol_vidtype:D({data:e,param:Z,vidType:e._currVidType}),nol_tagSrc:D({data:e,param:$,vidType:e._currVidType}),nol_linearAdLoadFlag:D({data:e,param:ta,vidType:e._currVidType}),nol_ac:D({data:e,param:ea,vidType:e._currVidType})},x(e,La.onCmsDetected,R));break;case"6":case"pause":F(e);break;case"7":case"stop":F(e);break;case"updateott":if(F(e),s&&s.hasOwnProperty("ottStatus")&&s.ottStatus.length>0){for(var oa in s)s.hasOwnProperty(oa)&&(D({data:e,param:oa,val:s[oa],vidType:"content"}),ia.ottStatusObj[oa]=s[oa]);La.onOTTDetected&&x(e,La.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===Q||"staticend"===Q)&&"dcrstatic"!==D({data:e,param:"nol_product"}))return;if("56"!==Q&&"staticend"!==Q&&"dcrstatic"===D({data:e,param:"nol_product"}))return;if(!("57"!==Q&&"onComplete"!==Q||"mtvr"!==D({data:e,param:"nol_product"})&&"id3"!==D({data:e,param:$,vidType:"content"})||D({data:e,param:"nolPriv_dtvrHybrid",vidType:"content"})===!0))return;"ad"===e._currVidType&&("streamduration"===D({data:e,param:"nol_cadence"})?w(e):"dcrvideo"===D({data:e,param:"nol_product"})&&"interval"===D({data:e,param:"nol_cadence"})&&(""===D({data:e,param:"nol_dataDate",vidType:"content"})&&""!==D({data:e,param:"nol_dataDate"})&&(D({data:e,param:"nol_dataDate",val:D({data:e,param:"nol_dataDate"}),vidType:"content"}),D({data:e,param:"nol_hourCode",val:D({data:e,param:"nol_hourCode"}),vidType:"content"}),D({data:e,param:"nol_dayId",val:D({data:e,param:"nol_dayId"
}),vidType:"content"})),e._currVidType="content",La.onEndDetected&&x(e,La.onEndDetected),w(e))),"static"!==D({data:e,param:"nol_ac"})&&(e._currVidType="content"),La.onEndDetected&&x(e,La.onEndDetected),D({data:e,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==D({data:e,param:"nol_disabled"})&&"id3"!==D({data:e,param:"nol_product"})||("static"===D({data:e,param:"nol_ac"})&&a._listeners.fireEvent("removeCmbAssetId",n),N(e)),D({data:e,param:"nol_onCompleteFired",val:!0}),ca[r].forceStreamRegen=!0,"56"!=Q&&"staticend"!=Q||"dcrstatic"!==D({data:e,param:"nol_product"})||(a.PLDCR.stop(),ia.static.started=!1),"57"!==Q&&"onComplete"!==Q||D({data:e,param:"nolPriv_dtvrHybrid",val:!1,vidType:"content"});break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===D({data:e,param:"nol_disabled"})||!s||"nol_pageoffset"!==D({data:e,param:"nol_timer"}))return;"1"===D({data:e,param:"nol_onPaginateFired_static"})&&(D({data:e,param:"nol_onPaginateFired",val:"0",vidType:"static"}),"impression"!==D({data:e,param:"nol_cadence"})&&J(e,{vidType:"static"})),K=o(D({data:e,param:"nol_highWM"}),"num"),K<o(s,"num")&&D({data:e,param:"nol_highWM",val:s}),C(s,e),D({data:e,param:"nol_davState",val:"1"});break;case"49":case"setplayheadposition":case"playheadposition":if(s>-1){if(D({data:e,param:"nol_onCompleteFired"})===!0&&a._listeners.fireEvent("flushPauseEventQueue"),"true"===D({data:e,param:"nol_disabled"})||!s||"nol_cmsoffset"!==D({data:e,param:"nol_timer"})||"ad"===e._currVidType&&"dcrvideo"===D({data:e,param:"nol_product"})&&"impression"===D({data:e,param:"nol_cadence"}))return;if("number"!=typeof s){if("string"!=typeof s)return;s=o(s,"num")}D({data:e,param:"nol_isLive",val:(s>86400).toString()}),K=o(D({data:e,param:"nol_highWM"}),"num"),K<s&&D({data:e,param:"nol_highWM",val:s}),e.serviceFlag.stn.need?(D({data:e,param:"nol_queueTime",val:s}),V(e,{service:"stn",key:D({data:e,param:"nol_assetid"}),url:D({data:e,param:"nol_stationURL"}),nol_playerId:D({data:e,param:"nol_playerId"})})):C(s,e),D({data:e,param:"nol_davState",val:"1"})}else t.timeStamp&&!Da[t.timeStamp]&&(f(e,{type:15,msg:"A negative playhead position was sent and will be ignored."},void 0,!0),Da[t.timeStamp]=!0,a._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."}));break;case"55":case"sendid3":if(("object"==typeof s&&Object.keys(s).length>0||"string"==typeof s&&s.length>0)&&(D({data:e,param:"nol_onCompleteFired"})===!0&&ia&&ia.getPauseQueueCount&&ia.getPauseQueueCount()>0?a._listeners.fireEvent("flushPauseEventQueue"):D({data:e,param:"nol_onCompleteFired"})===!0&&ia&&!ia.getPauseQueueCount&&a._listeners.fireEvent("flushPauseEventQueue"),"object"==typeof s))for(H=0;H<s.length;H+=1)if(s[H].key&&"PRIV"===s[H].key){s=s[H].info;break}if(S=s.toString(),249!==S.length&&t.timeStamp&&!Da[t.timeStamp]&&(Da[t.timeStamp]=!0,window.console&&window.console.warn&&window.console.warn("Warning: ID3 tag length is not 249."),a._listeners.fireEvent("warn",{type:"warn",msg:"ID3 tag length is not 249."})),P=S.split("/"),s={},P.length<o(Aa.nol_breakout,"num"))return;for(Y in Aa)Aa.hasOwnProperty(Y)&&(s[Y]=P[Aa[Y]],"nol_breakout"===Y&&(s[Y]=P[o(Aa[Y],"num")].substr(0,2)),R[Y]=s[Y]);if(!s||D({data:e,param:"nol_tsvBreakoutMap"})&&D({data:e,param:"nol_tsvBreakoutMap"}).enable.indexOf(s.nol_breakout)===-1||s.nol_nWebAddress.indexOf("nielsen.com")===-1||s.nol_fdcid===D({data:e,param:"nol_cidNull"})&&s.nol_pccid===D({data:e,param:"nol_cidNull"}))return;for(e._currVidType="content",G=0,H=T.length;G<H;G+=1)d=Ca[T[G]]?Ca[T[G]].clientField:T[G],R[T[G]]=s[d]||D({data:e,param:T[G]});if(R.nol_vidtype="content",x(e,La.onId3Detected,R),"false"!==R.nol_disabled||"nol_cmsoffset"===D({data:e,param:"nol_timer"}))return;if("daypart"===D({data:e,param:"nol_cadence"})){var _a=D({data:e,param:"nol_assetid"});!_a&&s.nol_fdcid&&s.nol_fdcid!==D({data:e,param:"nol_cidNull"})?e._currAssetid=s.nol_fdcid:!e._currAssetid&&_a&&(e._currAssetid=_a)}if(s.nol_ac=e._currVidType,s.nol_assetid=D({data:e,param:"nol_assetid"})||e._currAssetid,u>0&&(D({data:e,param:"nol_product"}).indexOf("id3")!==-1||D({data:e,param:"nol_product"}).indexOf("mtvr")!==-1)&&(s.nol_pccid!==D({data:e,param:"nol_cidNull"})&&s.nol_pccid!==D({data:e,param:"nol_pccid"})||s.nol_fdcid!==D({data:e,param:"nol_cidNull"})&&s.nol_fdcid!==D({data:e,param:"nol_fdcid"}))&&w(e),!D({data:e,param:"nol_subTag"})&&"id3"!==D({data:e,param:"nol_product"})||s.nol_pccid===D({data:e,param:"nol_cidNull"})||s.nol_pccid===D({data:e,param:"nol_pccid"})||(b.filters.onId3PcCidChanged=!0,b.count+=1),D({data:e,param:"nol_subTag"})||s.nol_fdcid===D({data:e,param:"nol_cidNull"})||s.nol_fdcid===D({data:e,param:"nol_fdcid"})||(b.filters.onId3FdCidChanged=!0,b.count+=1),b.count){if(z(e,"sendID3",s),!b.filters.onId3FdCidChanged&&D({data:e,param:"nol_fdcid"})!=D({data:e,param:"nol_cidNull"})||D({data:e,param:"nol_tsvBreakoutMap"}).enable.indexOf(s.nol_breakout)===-1||(e.serviceFlag.tsv.need=!0),b.count>0)for(Y in b.filters)if(b.filters[Y]&&(x(e,La[Y]),"true"===D({data:e,param:"nol_disabled"})))return;if(La.onComplete&&(x(e,La.onComplete),"true"===D({data:e,param:"nol_disabled"})))return}else for(Y in s)s.hasOwnProperty(Y)&&D({data:e,param:Y,val:s[Y]});if(D({data:e,param:"nol_id3Raw",val:S}),e.serviceFlag.tsv.need&&h.indexOf("|"+D({data:e,param:"nol_product"})+"|")!==-1&&(L=D(b.filters.onId3PcCidChanged===!0?{data:e,param:"nol_pccid"}:{data:e,param:"nol_fdcid"}),V(e,{service:"tsv",key:L,url:D({data:e,param:"nol_tsvURL"})})),"id3"===D({data:e,param:"nol_product"})&&s.nol_watermark&&String(s.nol_watermark).length>0)return v=D({data:e,param:"nol_id3Data"}),g=Math.round(Ma(e)/1e3+X),M=D({data:e,param:"nol_id3Seq"})||0,v?D({data:e,param:"nol_id3Data",val:v+="|"+g+","+D({data:e,param:"nol_id3Raw"})}):(D({data:e,param:"nol_id3Data",val:M+":"+D({data:e,param:"nol_clocksrc"})+":"+D({data:e,param:"nol_tsvFlag"})+":"+g+","+D({data:e,param:"nol_id3Raw"})}),D({data:e,param:"nol_id3Seq",val:o(M,"num")+1,vidType:"content"})),u>0&&w(e,{returnLength:!0}),u+=1,D({data:e,param:"nolPriv_id3Count",val:u}),void D({data:e,param:"nol_davState",val:"1"});if(u+=1,D({data:e,param:"nolPriv_id3Count",val:u}),O=D({data:e,param:D({data:e,param:"nol_timer"})})||D({data:e,param:"nol_fdoffset"}),"daypart"===D({data:e,param:"nol_cadence"})&&(O=o(O,"num"),O+="nol_pcoffset"==D({data:e,param:"nol_timer"})?o(D({data:e,param:"nol_pcTimeCode"}),"num"):o(D({data:e,param:"nol_fdTimeCode"}),"num")),e.serviceFlag.tsv.need)D({data:e,param:"nol_queueTime",val:O});else{if("true"===D({data:e,param:"nol_disabled"}))return;C(O,e),D({data:e,param:"nol_davState",val:"1"})}break;case"60":case"mute":break;case"30":case"onpaginate":"dcrstatic"===D({data:e,param:"nol_product"})&&La.onPaginateDetected&&"stream"!==D({data:e,param:"nol_cadence"})&&x(e,La.onPaginateDetected),D({data:e,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":Ra.updateMetadata(e,l,Ca);var va=D({data:e,param:"nol_adLoadType"});""!==va&&void 0!==va&&null!==va&&x(e,La.onAdLoadFlag)}j(e,sa)}}function G(a){var e,t=null,r="content"==a._currVidType?o(D({data:a,param:"nol_chnlCountThrshld"}),"num")||la:o(D({data:a,param:"nol_staticCountThrshld"}),"num")||la,n=a._dataArrObj[a._currVidType],i,s=0,l=a._dataArrObj.count;if(!a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)){if(l[a._currVidType]>=r){for(i in n)if(n.hasOwnProperty(i)){if(s=n[i].nolPriv_priority,s<=0){e=i;break}(null===t||t>s)&&(t=s,e=i)}n.hasOwnProperty(e)&&(delete n[e],l[a._currVidType]-=1)}a._dataArrObj[a._currVidType][a._currAssetid]={nolPriv_priority:0},l[a._currVidType]+=1}}function W(a,e){"undefined"!=typeof e&&e===!0&&(a._dataArrObj.static={}),a._dataArrObj.ad={},a._dataArrObj.content={},a._dataArrObj.count={content:0,ad:0,static:0},a._currAssetid="0"}function q(e){try{var t=D({data:e,param:"nol_playerId"});if(t&&a._players&&a._players.hasOwnProperty(t)){var r=a._players[t];if(r&&Object.keys(r.ottStatusObj).length>0){var n;for(n in r.ottStatusObj)D({data:e,param:n,val:r.ottStatusObj[n],vidType:"content"})}}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}function J(e,t){try{if("1"===D({data:e,param:"nol_unifiedEnabled"})){var r=t&&t.hasOwnProperty("vidType")?t.vidType:e._currVidType.toLowerCase(),n=o(D({data:e,param:"nol_viewCount_"+r}),"num");D({data:e,param:"nol_viewCount_"+r,val:n+=1}),"1"===D({data:e,param:"nol_applyViewInc"})&&D({data:e,param:"nol_applyViewInc",val:"0"})}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function z(a,e,t){var r="",n,o,i="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count, nolPriv_baseSvrTime",s=D({data:a,param:{}}),l,d,p=D({data:a,param:"nol_playerId"});if(G(a),"ad"===a._currVidType.toLowerCase()&&(r="st,a",D({data:a,param:"nol_currSeg",val:"0"})),""===D({data:a,param:"nol_errorURL"})&&D({data:a,param:"nol_errorURL",val:ra+ta+oa+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===e)for(n in s)s.hasOwnProperty(n)&&i.indexOf(n)===-1&&D({data:a,param:n,val:M({data:a,param:n})||""});for(n in t)t.hasOwnProperty(n)&&D({data:a,param:String(n),val:String(t[n])});D({data:a,param:"nolPriv_sendData",val:!0}),D({data:a,param:"nol_davState",val:"0"}),D({data:a,param:"nol_highWM",val:"0"}),D({data:a,param:"nol_iagData",val:""}),D({data:a,param:"nol_disabled",val:"false"}),D({data:a,param:"nol_sendQual",val:M({data:a,param:"nol_sendQual"})||""}),D({data:a,param:"nolPriv_assetid",val:""}),D({data:a,param:"nol_c3"})||D({data:a,param:"nol_c3",val:r}),"content"===a._currVidType.toLowerCase()&&U(a),D({data:a,param:"nol_applyViewInc",val:"1"}),(!D({data:a,param:"nol_minutes"})||"daypart"!==D({data:a,param:"nol_cadence"})&&"dcrstatic"!==D({data:a,param:"nol_product"})||"dcrstatic"===D({data:a,param:"nol_product"})&&"stream"===D({data:a,param:"nol_cadence"}))&&(b(a),D({data:a,param:"nol_pingCount",val:0}));var m=D({data:a,param:"nol_adLoadType"});""!==m&&void 0!==m&&null!==m&&x(a,La.onAdLoadFlag),q(a)}function H(e,t){var r=t.id||t.getId?t.getId():"0",o=ca[r].nol_tagMap.nol_url,i,s,l,d=0,p=o?o[e.nol_url]||e.nol_url||"":e.nol_url||"",c={stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}},u={ad:{},content:{},static:{},count:{content:0,static:0}},_={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:window.location.href,nol_sendTime:"0",nol_pageURL:window.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:window.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0"},v=e;v.nol_playerId=r;var f={_dataArrObj:u,_settings:v,_currVidType:"ad",_currAssetid:"0",serviceFlag:c};a._listeners.addListener("tick",function(){if(t.pauseObj.eventPauseTime>=t.pauseObj.cmsPauseTime&&Ra.state.status.current(f)!==Ra.states.stopped&&Ra.state.status.current(f)!==Ra.states.paused&&Va.isEnabled(f)){var e={event:Na.events.pause,curPos:Ra.state.position.current(f),prevPos:null,timestamp:Ra.state.timeStamp.current(f)};Ra.state.set(f,e),Va.preProcess(f,e),t.pauseObj.eventPauseTime=0}t.pauseObj.pauseTime>t.pauseObj.maxPauseTime&&"dcrstatic"!==D({data:f,param:"nol_product"})&&(t.pauseObj.pauseTime=0,a._listeners.fireEvent("handleSessionReset",{plid:r,passedFdata:f}),a._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),W(f);for(l in _)e.hasOwnProperty(l)?v[l]=e[l]:v[l]=ca[r][l]||_[l];if(v.nol_customExtension&&p){for(i=0,s=v.nol_customExtension.length;i<s;i+=1)p=p.replace("|!["+v.nol_customExtension[i]+"]!|",ca[r][v.nol_customExtension[i]]||"");v.nol_url=p}if("true"!==D({data:f,param:"nol_fireStop"})&&"interval,episode,streamduration".indexOf(D({data:f,param:"nol_cadence"}))===-1||n("pagehide||beforeunload",function(a){Ta&&(window.clearInterval(Ta),Ta=0,m({baseSvrTime:Ma(f),serverTimeOffset:D({data:f,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:D({data:f,param:"nol_rfrmsk"})})),"sendBeacon"in navigator&&(Ia=!0),D({data:f,param:"nol_forceFireOnClose_content",val:"1"}),La.onEndDetected&&x(f,La.onEndDetected),Va.setNextTick(f,null,"content"),N(f)}),this.eventListener=function(a){Q(f,a)},ca[r].eventQueue.length>d)for(i=0;i<ca[r].eventQueue.length;i+=1)ca[r]&&ca[r].eventQueue&&(ca[r].eventQueue[i].timeStamp="queued"+i),Q(f,ca[r].eventQueue[i]),d=i}function Y(e){e&&e.hasOwnProperty("configReq")&&e.hasOwnProperty("player")&&e.configReq.length>0&&"undefined"!=typeof e.player?(l(e.configReq),window.clearInterval(e.player.lsPopulatedInterval),e.player.lsPopulatedInterval=0):a._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}var K=a.PLDPR=a.PLDPR||{},X=window.NOLCMB,Z=X.sdkvForConfig?X.sdkvForConfig():"bj.5.0.0",$="5.1.0",aa="75-4",ea=a.getBaseBuildVer?a.getBaseBuildVer()+aa:$+aa,ta="cgi-bin/",ra=X.getConfigAddress(),na="cfg",oa="error",ia=a.getLS(),sa=a.getConfigVer?a.getConfigVer():300,la=5,da={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},pa={regex:/\|\![\w\W]*?(\!\|)/g,length:2},ma=/[\[\{<\(\}\]>\)]/g,ca=K.dataObj||{},ua=0,_a=0,va=5,fa=5,ga=[],ya,Ta,ha=2,Pa=!1,Sa=[],wa="false",ba=wa,Oa,Ca={},La={},Ea={},ka=!1,Ia=!1,Aa,xa={send:function(t,r){var n=t,o=n.url.indexOf("&c62=")!==-1?e(n.url,"c62=")+"&c62=sendTime,"+("undefined"!=typeof r?r/1e3>>0:Ma()/1e3>>0):n.url,i=this,s=e(o,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),l=Ia?{onerror:{},onload:{}}:new Image;l.onerror=function(a){i.onError(a,n)},l.onload=function(a){},a.postMsgAvail&&n.hasOwnProperty("maskRefUrl")&&n.maskRefUrl!==-1&&"true"===n.maskRefUrl?Fa.sendMaskedPing(s):Ia?navigator.sendBeacon(s):l.src=s},setup:function(a){var e=this,t=a.hasOwnProperty("url")?a.url:"",r=a.params||{url:t,errorDelay:1e3*(a.delay||fa),retry:0,maskRefUrl:a.hasOwnProperty("maskRefUrl")&&String(a.maskRefUrl).length>0?a.maskRefUrl:-1};t&&t.length>0&&e.send(r,a.pingSendTime)},onError:function(a,e){var t=this,r=a.target.src;e&&e.retry<va&&r&&r.length>0&&(e.retry+=1,e.url=r,window.setTimeout(function(){t.send(e)},e.errorDelay))}},Ma=function(a){return Ra.getTime(a)},Da={},Va=function(){var a="nol_eventData",e="nol_eventDataDelimiter",t="nol_eventDataEvents",r="nol_eventDataEnabled",n=":",o={delimiter:"",eventsList:[]},i=function(){var a={play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MT"}};return a}(),s={get:function(e,t){var r="";return e&&(r=D({data:e,param:a,vidType:t||e._currVidType})),r},set:function(e,t,r){return e&&D({data:e,param:a,val:t,vidType:r||e._currVidType}),e},clear:function(e){e&&(D({data:e,param:a,val:"",vidType:"ad"}),D({data:e,param:a,val:"",vidType:"content"}))},clone:function(a){try{return{content:s.get(a,"content"),ad:s.get(a,"ad")}}catch(a){return null}},bind:function(a,e){try{if(a&&e)for(var t in e)s.set(a,e[t],t)}catch(a){}},append:function(a,e){if(a&&e){var t=s.get(a),r=s.delimiter(a),n=s.parseEventData(e);s.set(a,t?[t,n].join(r):n)}},delimiter:function(a){return a?(o.delimiter||(o.delimiter=D({data:a,param:e})),o.delimiter):""},isEnabled:function(a){return!!a&&"true"===D({data:a,param:r})},isEventEnabled:function(a,e){if(e&&a){var t=s.lookupEvent(a.toLowerCase());if(t)return s.eventsList(e).indexOf(t.name)>-1}return!1},eventsList:function(a){if(a){if(!o.eventsList||0==o.eventsList.length){var e=D({data:a,param:t});e&&(o.eventsList=e.split(","))}return o.eventsList}},clearCache:function(){o.delimiter="",o.eventsList=[]},lookupEvent:function(a){return a?i[a.toLowerCase()]:null},parseEventData:function(a){var e="";if(a){var t=s.lookupEvent(a.event);if(t){var r=[t.abbrv,a.timestamp,a.curPos];void 0!==a.prevPos&&null!==a.prevPos&&a.curPos!=a.prevPos&&r.push(a.prevPos),void 0!==a.p1&&null!==a.p1&&r.push(a.p1),e=r.join(n)}}return e},handleEvent:function(a,e){a&&e&&s.isEventEnabled(e.event,a)&&s.append(a,e)},setNextTick:function(a,e,t){var r=s.get(a,t);if(r&&r.indexOf("{{nextTick}}")>-1)if(e&&e.event===Na.events.playhead)a=s.set(a,r.replace(/{{nextTick}}/gi,1==e.curPos?"0":e.curPos),t);else{var n=Ra.state.position.current(a,t)||"0";a=s.set(a,r.replace(/{{nextTick}}/gi,n),t)}return a},preProcess:function(a,e){try{a&&e&&e.event&&e.event!==Na.events.play&&e.event.indexOf("event_")===-1&&(s.setNextTick(a,e),e.event===Na.events.stop&&"content"!==Ra.type.current(a)&&s.setNextTick(a,e,"content"),s.handleEvent(a,e))}catch(a){}},postProcess:function(a,e){try{a&&e&&e.event&&e.event===Na.events.play&&s.handleEvent(a,e)}catch(a){}}};return{get:s.get,set:s.set,clone:s.clone,bind:s.bind,clear:s.clear,append:s.append,isEnabled:s.isEnabled,isEventEnabled:s.isEventEnabled,preProcess:s.preProcess,postProcess:s.postProcess,setNextTick:s.setNextTick}}(),Ra={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer",playerId:"nol_playerId"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function(e){if(e){if("string"==typeof e)return a._players[e];var t=D({data:e,param:"nol_playerId"});return Ra.findPlayer(t)}return null},getTime:function(a){try{if(a&&!a.hasOwnProperty("type")){var e=D({data:a,param:Ra._keys.playerId});return ca[e].nolPriv_baseSvrTime.getTime()}return a&&a.hasOwnProperty("type")&&"override"===a.type&&a.hasOwnProperty("baseSvrTime")?a.baseSvrTime.getTime():(new Date).getTime()}catch(a){}},currentPosition:function(a){return o(D({data:a,param:Ra._keys.currentPosition}),"num")},currentTimestamp:function(a){return o(D({data:a,param:Ra._keys.currentTimestamp}),"num")},asset:{current:function(a){return a?a._currAssetid:null},parse:function(a){var e=Ca.nol_assetid?Ca.nol_assetid.clientField:"nol_assetid";return a?a[e]:null}},type:{isCurrentlyContent:function(a){return"content"===a._currVidType},isCurrentlyAd:function(a){return"ad"===a._currVidType},isCurrentlyStatic:function(a){return"static"===a._currVidType},current:function(a){return a._currVidType},parse:function(a,e){var t=Ca.nol_vidtype?Ca.nol_vidtype.clientField:"nol_vidtype",r=e[t]?e[t].toString().toLowerCase():"",n=","+D({data:a,param:"nol_contentType"});return r&&n.indexOf(","+r)!==-1?"content":"dcrstatic"===D({data:a,param:"nol_product"})?"static":"ad"}},tagName:function(a,e){return D({data:a,param:Ra._keys.tagName,vidType:e||a._currVidType})},localTimer:function(a,e){return D({data:a,param:Ra._keys.localTimer,vidType:e||a._currVidType})||"nol_fdoffset"},isInitialized:function(a,e){try{return e=e||a._currVidType,"{}"!==JSON.stringify(a._dataArrObj[e])}catch(a){return!1}},updateMetadata:function(e,t,r){try{var n={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype"]},o=function(a){var e=!0;for(var t in n.nolParams)if(r&&r.hasOwnProperty(n.nolParams[t])&&a===r[n.nolParams[t]].clientField){e=!1;break}return e};if(!e||!t)return;var i="undefined"!=typeof r&&"object"==typeof r&&r;for(var s in t)t.hasOwnProperty(s)&&(i&&o(s)?D({data:e,param:String(s),val:String(t[s])}):a._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+s+" is not allowed. Please remove "+s+" from your metadata parameter."}))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},state:{position:{current:function(a,e){return o(D({data:a,param:Ra._keys.stateCurrentPosition,vidType:e||a._currVidType}),"num")},previous:function(a,e){return o(D({data:a,param:Ra._keys.statePreviousPosition,vidType:e||a._currVidType}),"num")},set:function(a,e,t){var r=Ra.state.position.current(a);D({data:a,param:Ra._keys.statePreviousPosition,val:r,vidType:t||a._currVidType}),D({data:a,param:Ra._keys.stateCurrentPosition,val:e,vidType:t||a._currVidType})}},timeStamp:{current:function(a,e){return o(D({data:a,param:Ra._keys.stateCurrentTimestamp,vidType:e||a._currVidType}),"num")},previous:function(a,e){return o(D({data:a,param:Ra._keys.statePreviousTimestamp,vidType:e||a._currVidType}),"num")},set:function(a,e,t){var r=Ra.state.timeStamp.current(a);D({data:a,param:Ra._keys.statePreviousTimestamp,val:r,vidType:t||a._currVidType}),D({data:a,param:Ra._keys.stateCurrentTimestamp,val:e,vidType:t||a._currVidType})}},asset:{current:function(a,e){return D({data:a,param:Ra._keys.stateCurrentAsset,vidType:e||a._currVidType})},previous:function(a,e){return D({data:a,param:Ra._keys.statePreviousAsset,vidType:e||a._currVidType})},set:function(a,e,t){var r=Ra.state.asset.current(a);D({data:a,param:Ra._keys.statePreviousAsset,val:r,vidType:t||a._currVidType}),D({data:a,param:Ra._keys.stateCurrentAsset,val:e,vidType:t||a._currVidType})}},status:{current:function(a,e){return D({data:a,param:Ra._keys.stateCurrentStatus,vidType:e||a._currVidType})},previous:function(a,e){return D({data:a,param:Ra._keys.statePreviousStatus,vidType:e||a._currVidType})},set:function(a,e,t){var r=Ra.state.status.current(a,t);D({data:a,param:Ra._keys.statePreviousStatus,val:r,vidType:t||a._currVidType}),D({data:a,param:Ra._keys.stateCurrentStatus,val:e,vidType:t||a._currVidType})}},type:{current:function(a,e){return D({data:a,param:Ra._keys.stateCurrentType,vidType:e||a._currVidType})},previous:function(a,e){return D({data:a,param:Ra._keys.statePreviousType,vidType:e||a._currVidType})},set:function(a,e,t){var r=Ra.state.type.current(a,t);D({data:a,param:Ra._keys.statePreviousType,val:r,vidType:t||a._currVidType}),D({data:a,param:Ra._keys.stateCurrentType,val:e,vidType:t||a._currVidType})}},set:function(a,e){var t=Ra.findPlayer(a);switch(e.event){case"LOAD":Ra.state.asset.set(a,e.assetId),Ra.state.type.set(a,e.contentType),Ra.state.timeStamp.set(a,e.timestamp);break;case"PLAY":case"RESUME":Ra.state.status.set(a,Ra.states.playing),Ra.state.asset.set(a,e.assetId),Ra.state.type.set(a,e.contentType),Ra.state.timeStamp.set(a,e.timestamp),"PLAY"===e.event&&Ra.state.position.set(a,0),"RESUME"===e.event&&void 0!=e.currentPos&&null!=e.currentPos&&"{{nextTick}}"!=e.currentPos&&(Ra.state.position.set(a,e.curPos),Ra.state.timeStamp.set(a,e.timestamp)),t.pauseObj.eventPauseTime=0;break;case"PAUSE":Ra.state.status.set(a,Ra.states.paused);break;case"STOP":Ra.state.resetAsset(a),Ra.state.status.set(a,Ra.states.stopped);break;case"PLAYHEAD":Ra.state.position.set(a,e.curPos),Ra.state.timeStamp.set(a,e.timestamp),t.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":Ra.state.position.set(a,e.curPos),Ra.state.timeStamp.set(a,e.timestamp),t.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":t.pauseObj.eventPauseTime=0}},get:function(a,e){try{if(a){var t={position:{current:Ra.state.position.current(a,e),previous:Ra.state.position.previous(a,e)},timeStamp:{current:Ra.state.timeStamp.current(a,e),previous:Ra.state.timeStamp.previous(a,e)},asset:{current:Ra.state.asset.current(a,e),previous:Ra.state.asset.previous(a,e)},status:{current:Ra.state.status.current(a,e),previous:Ra.state.status.previous(a,e)},type:{current:Ra.state.type.current(a,e),previous:Ra.state.type.previous(a,e)}};return t}}catch(a){}return null},resetAsset:function(a){Ra.state.position.set(a,null),Ra.state.timeStamp.set(a,null),Ra.state.asset.set(a,null)},bind:function(a,e){try{if(a&&e)for(var t in e)D({data:a,param:Ra._keys.statePreviousPosition,val:e[t].position?e[t].position.previous:null,vidType:t}),D({data:a,param:Ra._keys.stateCurrentPosition,val:e[t].position?e[t].position.current:null,vidType:t}),D({data:a,param:Ra._keys.statePreviousTimestamp,val:e[t].timeStamp?e[t].timeStamp.current:null,vidType:t}),D({data:a,param:Ra._keys.stateCurrentTimestamp,val:e[t].timeStamp?e[t].timeStamp.current:null,vidType:t}),D({data:a,param:Ra._keys.statePreviousAsset,val:e[t].asset?e[t].asset.current:null,vidType:t}),D({data:a,param:Ra._keys.stateCurrentAsset,val:e[t].asset?e[t].asset.current:null,vidType:t}),D({data:a,param:Ra._keys.statePreviousStatus,val:e[t].status?e[t].status.current:null,vidType:t}),D({data:a,param:Ra._keys.stateCurrentStatus,val:e[t].status?e[t].status.current:null,vidType:t}),D({data:a,param:Ra._keys.statePreviousType,val:e[t].type?e[t].type.current:null,vidType:t}),D({data:a,param:Ra._keys.stateCurrentType,val:e[t].type?e[t].type.current:null,vidType:t})}catch(a){}},clone:function(a){try{return{content:Ra.state.get(a,"content"),ad:Ra.state.get(a,"ad")}}catch(a){}}}},Na=function(){var e={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},t={checkRewind:function(a,e){if(a&&void 0!==e&&null!==e&&"stream"!==D({data:a,param:"nol_cadence"})&&"impression"!==D({data:a,param:"nol_cadence"})){var t=Math.floor(o(e,"num")),r=Ra.state.position.current(a),n=t-r;return{match:n<0,currentPos:t,previousPos:r}}return!1},checkForward:function(a,e){if(a&&void 0!==e&&null!==e&&"stream"!==D({data:a,param:"nol_cadence"})&&"impression"!==D({data:a,param:"nol_cadence"})){var t=Math.floor(o(e,"num")),r=Ra.state.position.current(a),n=Ra.state.timeStamp.current(a),i=o(D({data:a,param:"nol_cmsIntrvlGp"}),"num")||2,s=Math.ceil((Ma(a)-n)/1e3)||1;if(0==r&&t>86400&&"nol_cmsoffset"===Ra.localTimer(a)){var l=Ma(a).toString().substr(0,e.toString().length);l&&(r=parseInt(l))}var d=t-r;return{match:d>i&&d>Math.ceil(1.5*s),currentPos:t,previousPos:r}}return!1}},r={checkRewind:function(a,e){var t=Ra.currentPosition(a),r=Ra.currentTimestamp(a),n=o(D({data:a,param:"nol_id3IntrvlGp"}),"num");return!1},checkForward:function(a,e){var t=Ra.currentPosition(a),r=Ra.currentTimestamp(a),n=o(D({data:a,param:"nol_id3IntrvlGp"}),"num");return!1}},n={inferEvent:function(r,n,i,s,l){var d=null;try{if(d={event:"event_"+r,curPos:Ra.state.position.current(n),prevPos:null,timestamp:s},r&&n)switch(r.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var p=Ra.asset.parse(l),m=Ra.state.asset.current(n),c=Ra.state.asset.previous(n),u=Ra.state.type.current(n),_=Ra.type.parse(n,l);if(d.event=e.load,d.assetId=p,d.contentType=_,Ra.state.status.current(n,_)==Ra.states.paused&&(m==p&&null!==p||u!==_)){d.event=e.resume,d.assetId=p,d.contentType=_,d.curPos="{{nextTick}}";break}if(Ra.state.status.current(n,_)!==Ra.states.playing&&m!=p||Ra.state.status.current(n,_)===Ra.states.stopped&&c==p&&null!==p||null===m){d.event=e.play,d.curPos="{{nextTick}}";break}break;case"5":case"play":d.event="event_play";break;case"7":case"stop":d.event="event_stop";break;case"57":case"end":case"oncomplete":d.event=e.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(i>-1){var v=t.checkRewind(n,i);if(v.match){d.event=e.rewind,d.curPos=v.currentPos,d.prevPos=v.previousPos,d.p1=d.prevPos-d.curPos;break}if(Va.get(n).indexOf("{{nextTick}}")===-1){var f=t.checkForward(n,i);if(f.match){d.event=e.forward,d.curPos=f.currentPos,d.prevPos=f.previousPos,d.p1=d.curPos-d.prevPos;break}}if(Ra.state.status.current(n)===Ra.states.paused){d.event=e.resume,d.assetId=Ra.state.asset.current(n),d.contentType=Ra.type.current(n),d.curPos=i;break}d.event=e.playhead,d.curPos=i}break;case"55":var g=D({data:n,param:D({data:n,param:"nol_timer"})})||D({data:n,param:"nol_fdoffset"});"daypart"===D({data:n,param:"nol_cadence"})&&(g=o(g,"num"),g+="nol_pcoffset"==D({data:n,param:"nol_timer"})?o(D({data:n,param:"nol_pcTimeCode"}),"num"):o(D({data:n,param:"nol_fdTimeCode"}),"num")),d.event=e.playhead;break;case"9":case"mute":d.event=e.mute,d.p1=i}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+r})}return d}};return{events:e,inferEvent:n.inferEvent}}(),Fa=function(a,e,t){var r={sendMaskedPing:function(n,o){a.lsReady()?e.contentWindow.postMessage(JSON.stringify({eventType:"maskref",data:{url:n}}),e.src):(o=o||0,o<t.maxRetry&&setTimeout(function(){r.sendMaskedPing(n,o+1)},300))}};return{sendMaskedPing:r.sendMaskedPing}}(a,ia,{maxRetry:va}),Ba=["sun","mon","tue","wed","thu","fri","sat"];return K.initFromConfig=function(e,t){a._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(e&&e.nol_GLOBALS){var r,n,i,l,d,p,c="localhost",u=e.nol_GLOBALS.debugSfcode||"uat-cert",_=e.nol_GLOBALS.nol_appid||"",v=e.nol_GLOBALS.nol_lsid||"",f=e.nol_GLOBALS.nol_emmURL||(e.nol_GLOBALS.nol_tagMap&&e.nol_GLOBALS.nol_tagMap.nol_defaults?e.nol_GLOBALS.nol_tagMap.nol_defaults.nol_emmURL:"")||"",g,y,T,h,P,S,w,b;if(a._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+a.localStorageId+"; config lsid: "+v}),a._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+a.EMMURL+"; config emm: "+f}),""===f&&""!==v?a.setLsId(v):""!==f&&(""!==v&&a.localStorageId!==v||f!==a.EMMURL)&&(a.setLsId(v,f),a.setEmmUrl(f)),a._listeners.fireEvent("sendOptOutStatus","OPTOUT"==v),void 0!==e.nol_GLOBALS.nol_maxRetry&&null!==e.nol_GLOBALS.nol_maxRetry&&""!==e.nol_GLOBALS.nol_maxRetry){var O=parseInt(e.nol_GLOBALS.nol_maxRetry);O>-1&&(va=O)}if(e&&e.hasOwnProperty("nol_GLOBALS")){var C=t||e.nol_GLOBALS.nol_playerId||0;if(n=a._players[C],!n)return;c=e.nol_GLOBALS.nol_sfcode||c,a._listeners.fireEvent("debug",{type:"debug",msg:'SDK instance "'+n.name+'" initialized with globals '+JSON.stringify(n.getConfigParams().ggParams)}),n.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(e.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(e.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},b=a.localStorage?ca[C]?ca[C].nol_serverTime||a.localStorage.getItem("nol_serverTime"):a.localStorage.getItem("nol_serverTime")||0:ca[C]?ca[C].nol_serverTime:0,b===e.nol_GLOBALS.nol_serverTime?ua=0:(ua=0,a.localStorage&&a.localStorage.setItem("nol_serverTime",e.nol_GLOBALS.nol_serverTime)),fa=e.nol_GLOBALS.nol_errorWait||fa,r=n.getConfigParams().ggParams||{},ca[C]=s(ca[C]),ca[C].nolPriv_serverTimeOffset=ua,ca&&ca.hasOwnProperty(C)?(ca[C].nolPriv_baseSvrTime=e.nol_GLOBALS.hasOwnProperty("nol_serverTime")&&e.nol_GLOBALS.nol_serverTime?new Date(1e3*o(e.nol_GLOBALS.nol_serverTime,"num")):(new Date).getTime(),a._listeners.addListener("tick",function(){ca[C].nolPriv_baseSvrTime.setUTCSeconds(ca[C].nolPriv_baseSvrTime.getUTCSeconds()+1)})):a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Invalid data object or playerId."}),Ta&&(window.clearInterval(Ta),Ta=0),e.nol_GLOBALS.nol_sendTimer&&(Ta=window.setInterval(function(){m({baseSvrTime:Ma(fData),serverTimeOffset:ca[C].nolPriv_serverTimeOffset,url:"__sendIt"})},1e3*e.nol_GLOBALS.nol_sendTimer));for(i in r)r.hasOwnProperty(i)&&(ca[C][i]=r[i]);
for(i in e.nol_GLOBALS)e.nol_GLOBALS.hasOwnProperty(i)&&(ca[C][i]=e.nol_GLOBALS[i]);La=ca[C].nol_eventFilter||{},Ea=ca[C].nol_serviceFilter||{},Aa=ca[C].nol_id3Map||{};for(i in ca[C].nol_clientCMSmap)ca[C].nol_clientCMSmap.hasOwnProperty(i)&&(y=ca[C].nol_clientCMSmap[i].toString()||"",T=y.replace(ma,""),P=y.match(ma)||[],h={clientField:T.toString(),encoding:P.join("")},Ca[i]=h);e.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&X.hasOwnProperty("setTotalNumAssetsAllowed")&&X.setTotalNumAssetsAllowed(e.nol_GLOBALS.nol_maxStaticInstances),n.configLoaded=!0,ca[C].nol_lstrg="",v&&"999"!==v&&!a.userAgent.isFB()&&(ca[C].nol_lstrg="lstrg-"+v)}if(e&&e.hasOwnProperty("nol_TAGS"))for(ca[C].tagSize=e.nol_TAGS.length,ca[C].tags=[],a._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),i=0;i<ca[C].tagSize;i+=1)a._listeners.fireEvent("debug",{type:"debug",msg:String(e.nol_TAGS[i].nol_comment)}),ca[C].tags.push(new H(JSON.parse(JSON.stringify(e.nol_TAGS[i])),n));if(void 0!==a.enablePlayer&&a.enablePlayer(C,"PLDPR"),ca[C].bReInit=!1,r.nol_hybridCfg&&window&&window.JSON&&(g=window.document.createElement("script"),g.text="(function() {if (typeof "+r.nol_hybridCfg+" === 'function'){"+r.nol_hybridCfg+"('"+JSON.stringify(e)+"')}}())",window.document.head?(window.document.head.appendChild(g),window.document.head.removeChild(g)):(window.document.getElementsByTagName("head")[0].appendChild(g),window.document.getElementsByTagName("head")[0].removeChild(g))),ca[C].forceStreamRegen=!1,ca[C].forceStreamRegen=!1,a._listeners.addListener("tick",function(){n&&n.hasOwnProperty("pauseObj")&&n.pauseObj.hasOwnProperty("pauseTime")&&(n.pauseObj.pauseTime+=1,n.pauseObj.eventPauseTime+=1)}),n&&n.configLoaded&&window.NOLCMB&&window.NOLCMB.controllers&&window.NOLCMB.controllers.util&&window.NOLCMB.controllers.util.fireCustomEvent)try{window.NOLCMB.controllers.util.fireCustomEvent("NSDK_Initialized",{instanceName:n.name,instance:n})}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Exception firing NSDK_Initialized event."})}a._listeners.fireEvent("flushQueue")}else window.console&&window.console.warn&&window.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),a._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."})}catch(e){window.console&&window.console.error&&window.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct."),a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response."})}},K.getCmsMap=function(e){try{if("undefined"!=typeof e&&"string"==typeof e||a._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),ca&&ca.hasOwnProperty(e)&&"undefined"!=typeof ca[e].nol_clientCMSmap)return ca[e].nol_clientCMSmap}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},K.init=function(e){var t=e.getConfigParams()||{},r,n,o=a.getIfLsidShouldSend()?a.getLsId():void 0,i,s="",l=0===ra.indexOf("https")?"https":"http",d=t.nol_playerId||t.playerId||0;i={pli:{val:d,protect:!0},nmspc:{val:"NOLCMB",protect:!0},sdkv:{val:Z,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:sa,protect:!0},bldv:{val:ea,protect:!0},prefprotocol:{val:l,protect:!1}},e.addListener("ggPM",function(a){k(a)}),e.lsPopulatedInterval=0,e.lsCurrentRetry=0,e.serviceSending={tsv:!1,stn:!1},e.ottStatusObj={},e.oServiceCall={},e.static={started:!1};for(r in t.ggParams)!t.ggParams.hasOwnProperty(r)||i[r]&&i[r].protect||0==r.indexOf("nol_")||(i[r]={val:p(t.ggParams[r])});for(r in i)i.hasOwnProperty(r)&&(s+=r+"="+i[r].val+"&");s=s.substr(0,s.length-1),n=ra.replace(/[\w\W]*?:\/\//g,""),void 0===o||e.lsPopulatedInterval?void 0===o&&(Oa=l+"://"+n+ta+na+"?"+s+"&sendTime="+Math.floor(Ma()/1e3),Y({configReq:Oa,player:e})):e.lsPopulatedInterval=window.setInterval(function(){o=a.getLsId(),"-1"!==o?(Oa=l+"://"+n+ta+na+"?"+s+"&lsid="+o+"&sendTime="+Math.floor(Ma()/1e3),Y({configReq:Oa,player:e})):e.lsCurrentRetry===ha?(Oa=l+"://"+n+ta+na+"?"+s+"&lsid=999&sendTime="+Math.floor(Ma()/1e3),Y({configReq:Oa,player:e})):e.lsCurrentRetry+=1},1e3)},K.built||(K.built=!0,K.BUILDVERSION=ea,K.dataObj=ca,a.bindPlayers(K,"PLDPR"),a._listeners.fireEvent("flushQueue")),K});